<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>сЃГсЃѕ7 С║ѕТЃ│сѓисЃЪсЃЦсЃгсЃ╝сѓ┐сЃ╝ сЃЌсЃГсЃЋсѓДсЃЃсѓисЃДсЃісЃФ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f3f4f6;
        }
        /* сЃГсЃѕсЂ«сЃюсЃ╝сЃФжбесЃЄсѓХсѓцсЃ│ */
        .loto-ball {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.25rem;
            color: white;
            box-shadow: inset -2px -2px 6px rgba(0,0,0,0.3), 2px 2px 4px rgba(0,0,0,0.1);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .ball-mini {
            width: 28px; height: 28px; font-size: 0.8rem;
        }
        /* уЋфтЈитИ»сЂћсЂесЂ«УЅ▓тѕєсЂЉ */
        .ball-yellow { background: linear-gradient(135deg, #fbbf24, #d97706); color: #000; text-shadow: none; }
        .ball-blue { background: linear-gradient(135deg, #60a5fa, #2563eb); }
        .ball-red { background: linear-gradient(135deg, #f87171, #dc2626); }
        .ball-green { background: linear-gradient(135deg, #34d399, #059669); }
        
        /* тЄдуљєСИГсЂ«сѓ╣сЃћсЃісЃ╝ */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800 p-4 md:p-8">

    <div class="max-w-5xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden relative">
        <!-- сЃўсЃЃсЃђсЃ╝ -->
        <div class="relative bg-gradient-to-r from-slate-800 to-indigo-900 p-6 text-white text-center">
            <h1 class="text-3xl font-black mb-2 tracking-wider mt-2">­Ъј» сЃГсЃѕ7 С║ѕТЃ│сѓисЃЪсЃЦсЃгсЃ╝сѓ┐сЃ╝ Pro</h1>
            <p class="text-sm opacity-90 text-indigo-200">сЃъсЃФсѓ│сЃЋТјеуД╗сЃъсЃѕсЃфсЃЃсѓ»сѓ╣ №╝є ућЪтГўТЎѓжќЊ(тђІтѕЦсЃЈсЃъсѓітѕєтИЃ)тѕєТъљAIТљГУ╝Ѕ</p>
        </div>

        <div class="p-6 md:p-8 space-y-8">
            
            <!-- STEP 1: сЃЄсЃ╝сѓ┐Т║ќтѓЎ -->
            <section class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                <h2 class="text-xl font-bold border-b-2 border-indigo-500 pb-2 mb-4 text-slate-800">STEP 1: жЂјтј╗сЃЄсЃ╝сѓ┐сЂ«Т║ќтѓЎ</h2>
                <textarea id="csvData" rows="6" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-xs font-mono mb-2 bg-white shadow-inner" placeholder="сЃЄсЃ╝сѓ┐УфГсЂ┐УЙ╝сЂ┐СИГ..."></textarea>
                
                <div class="mb-4">
                    <label class="inline-flex items-center text-sm text-slate-700 cursor-pointer">
                        <input type="checkbox" id="includeBonus" class="rounded text-indigo-600 focus:ring-indigo-500" checked>
                        <span class="ml-2">сЃюсЃ╝сЃісѓ╣ТЋ░тГЌсѓѓтЁеСйЊтЄ║уЈЙжа╗т║дсЂ«жЏєУеѕсЂФтљФсѓЂсѓІ</span>
                    </label>
                </div>

                <div class="mb-4 bg-white p-3 border border-indigo-200 rounded-lg shadow-sm">
                    <span class="block text-sm font-bold text-slate-700 mb-2">УДБТъљсЃбсЃ╝сЃЅжЂИТіъ:</span>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <label class="flex items-center gap-2 cursor-pointer bg-slate-50 px-3 py-2 rounded border hover:bg-slate-100 transition">
                            <input type="radio" name="analyzeMode" value="predict" checked class="text-indigo-600 focus:ring-indigo-500 w-4 h-4">
                            <span class="text-sm text-slate-800"><b>жђџтИИС║ѕТЃ│</b> <span class="text-xs text-slate-500">№╝ѕтЁесЃЄсЃ╝сѓ┐сѓњСй┐сЂБсЂдТгАтЏъсЂ«С║ѕТЃ│сѓњсЂЎсѓІ№╝Ѕ</span></span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer bg-indigo-50 px-3 py-2 rounded border border-indigo-200 hover:bg-indigo-100 transition">
                            <input type="radio" name="analyzeMode" value="backtest" class="text-indigo-600 focus:ring-indigo-500 w-4 h-4">
                            <span class="text-sm font-bold text-indigo-700">жЂјтј╗ТцюУе╝№╝ѕсЃљсЃЃсѓ»сЃєсѓ╣сЃѕ№╝Ѕ <span class="text-xs text-indigo-500 font-normal">№╝ѕСИђуЋфСИІсЂ«УАїсѓњТГБУДБсЂесЂЌсЂджџасЂЌсђЂсЃєсѓ╣сЃѕсЂЎсѓІ№╝Ѕ</span></span>
                        </label>
                    </div>
                </div>

                <div class="mt-3 flex flex-wrap gap-4">
                    <button id="btnMockData" class="bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-4 rounded transition text-sm">
                        ­ЪДф сЃєсѓ╣сЃѕућесЃђсЃЪсЃ╝сЃЄсЃ╝сѓ┐ућЪТѕљ
                    </button>
                    <button id="btnAnalyze" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition flex items-center gap-2 w-full md:w-auto justify-center">
                        <span class="text-lg">­ЪЊі сЃЄсЃ╝сѓ┐УДБТъљсЂеAIТюђжЂЕтїќсѓњт«ЪУАї</span>
                    </button>
                </div>
            </section>

            <!-- STEP 2: тѕєТъљухљТъю -->
            <section id="analysisSection" class="hidden">
                <h2 id="analysisTitle" class="text-xl font-bold border-b-2 border-indigo-500 pb-2 mb-4 text-slate-800">STEP 2: сЃЄсЃ╝сѓ┐УДБТъљухљТъю №╝є AIтГду┐њсЃбсЃЄсЃФ</h2>
                
                <!-- уЏ┤У┐ЉсЂ«тйЊсЂЏсѓЊТЋ░тГЌ -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 mb-6 flex flex-col md:flex-row items-center justify-between gap-4 shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-1 h-full bg-indigo-500"></div>
                    <div>
                        <h3 class="font-bold text-slate-800 mb-1">­ЪЊї уЏ┤У┐Љ№╝ѕТюђТќ░тЏъ№╝ЅсЂ«тйЊсЂЏсѓЊТЋ░тГЌ</h3>
                        <p class="text-xs text-slate-500">сЂЊсЂ«ухљТъюсѓњУхиуѓ╣сЂесЂЌсђЂсЃъсЃФсѓ│сЃЋжђБжјќсЂФсѓѕсѓІТјеуД╗уб║ујЄсЂеТ│бтЈіті╣ТъюсѓњУеѕу«ЌсЂЌсЂЙсЂЎсђѓ</p>
                    </div>
                    <div id="latestDraw" class="flex gap-1 font-bold text-lg"></div>
                </div>

                <!-- сЃъсѓ»сЃГсЃ╗сЃЪсѓ»сЃГтѕєТъљUI -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    <!-- уЏИТђДсЃџсѓб -->
                    <div class="bg-purple-50 p-4 rounded-xl border border-purple-200 shadow-sm">
                        <h3 class="font-bold text-purple-800 mb-2 border-b border-purple-200 pb-1 text-sm">­Ъњъ Тюђт╝исЂ«уЏИТђДсЃџсѓб (тљїТЎѓтЄ║уЈЙ)</h3>
                        <p class="text-[10px] text-purple-600 mb-2">тљїсЂўтЏъсЂФСИђуињсЂФжЂИсЂ░сѓїсЂЪтЏъТЋ░ Top5</p>
                        <ul id="bestPairs" class="space-y-2 text-sm text-purple-900 font-mono"></ul>
                    </div>

                    <!-- жЂиуД╗уб║ујЄ -->
                    <div class="bg-amber-50 p-4 rounded-xl border border-amber-200 shadow-sm relative">
                        <div class="absolute -top-3 -right-3 bg-amber-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow">New</div>
                        <h3 class="font-bold text-amber-800 mb-2 border-b border-amber-200 pb-1 text-sm">РъА№ИЈ тЅЇтЏъсЂІсѓЅсЂ«сђїТхЂсѓїсђЇ (ТјеуД╗уб║ујЄ)</h3>
                        <p class="text-[10px] text-amber-600 mb-2">тЅЇтЏъсЂ«ТЋ░тГЌсЂ«<b>сђїуЏ┤тЙїсђЇ</b>сЂФтЄ║сЂЪтЏъТЋ░ Top5</p>
                        <ul id="bestTransitions" class="space-y-2 text-sm text-amber-900 font-mono"></ul>
                    </div>

                    <!-- сѓ╣сЃЕсЃ│сЃЌсЃ╗ТюђтцДсЃЈсЃъсѓі -->
                    <div class="bg-blue-50 p-4 rounded-xl border border-blue-200 shadow-sm">
                        <h3 class="font-bold text-blue-800 mb-2 border-b border-blue-200 pb-1 text-sm">РЮё№ИЈ сѓ╣сЃЕсЃ│сЃЌжЎљуЋїТЋ░тГЌ (ућЪтГўТЎѓжќЊтѕєТъљ)</h3>
                        <p class="text-[10px] text-blue-600 mb-2">уЈЙтюесЂ«сЃЈсЃъсѓітЏъТЋ░сЂесђЂжЂјтј╗ТюђтцДсЃЈсЃъсѓітЏъТЋ░</p>
                        <ul id="coldNumbers" class="space-y-2 text-sm"></ul>
                    </div>
                </div>

                <!-- AIУЄфти▒тГду┐њухљТъю -->
                <div class="bg-slate-800 p-5 rounded-xl shadow-lg text-sm text-slate-200 mb-6">
                    <h3 class="font-bold text-indigo-300 mb-2 border-b border-slate-600 pb-2 flex items-center gap-2">
                        ­Ъцќ FisherтѕцтѕЦТ»ћсЂФтЪ║сЂЦсЂЈAIУЄфтІЋжЄЇсЂ┐С╗ўсЂЉ№╝ѕсЃџсЃісЃФсЃєсѓБТюђжЂЕтїќ№╝Ѕ
                    </h3>
                    <p class="text-xs text-slate-400 mb-4">сђїТГБУДБсЃЄсЃ╝сѓ┐сђЇсЂесђїсЃЕсЃ│сЃђсЃасЂфсЃЈсѓ║сЃгсђЇсЂ«тѕєтИЃти«№╝ѕFisherсЂ«тѕцтѕЦТ»ћ№╝ЅсѓњУеѕу«ЌсЂЌсђЂсЃЈсѓ║сЃгсѓњТюђсѓѓжФўу▓Йт║дсЂФт╝ЙсЂЇтЄ║сЂЏсѓІуЅ╣тЙ┤жЄЈсЂФжЄЇсЂ┐сѓњУЄфтІЋтѕєжЁЇсЂЌсЂЙсЂЌсЂЪсђѓ</p>
                    <div id="aiWeightsDisplay" class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-3">
                        <!-- JSсЂДсЃљсЃ╝сѓњТї┐тЁЦ -->
                    </div>
                </div>

                <!-- сЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│тѕєтИЃ -->
                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-700 hidden" id="histScoreSection">
                    <h3 class="font-bold text-slate-800 mb-2 border-b pb-2">­ЪЊі тЪ║уцјсѓ╣сѓ│сѓбсЂ«сЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│тѕєТъљ№╝ѕсѓ┐сЃ╝сѓ▓сЃЃсЃѕТійтЄ║№╝Ѕ</h3>
                    <p class="text-xs text-slate-500 mb-4">тљётЏъсЂ«ТійсЂЏсѓЊТЎѓуѓ╣сЂДсђїсЂЮсѓїсѓѕсѓітЅЇсЂ«сЃЄсЃ╝сѓ┐сђЇсѓњСй┐сЂБсЂдтГду┐њсЂЌсђЂТГБУДБухљТъюсЂїСйЋуѓ╣сЂ«тЪ║уцјсѓ╣сѓ│сѓбсЂасЂБсЂЪсЂІсЂ«т«ЪуИЙсЂДсЂЎсђѓ<br><span class="text-indigo-600 font-bold">сѓисЃЪсЃЦсЃгсЃ╝сѓисЃДсЃ│ТЎѓсЂФсЂ»сђЂсЂЊсЂ«сђїт╣│тЮЄтЪ║уцјсѓ╣сѓ│сѓбсђЇсЂФТюђсѓѓУ┐ЉсЂёжЂЕт║дсЂфТ│бтйбсЂїсђЂТюђухѓсѓ╣сѓ│сѓб10,000уѓ╣№╝ѕт░цт║дТюђтцД№╝ЅсЂесЂфсѓІсѓѕсЂєУЄфти▒УБюТГБсЂЌсЂЙсЂЎсђѓ</span></p>
                    <div class="flex flex-col md:flex-row gap-8 items-center">
                        <div class="w-full md:w-2/3">
                            <div id="scoreDistribution" class="space-y-2">
                                <!-- JSсЂДТї┐тЁЦ -->
                            </div>
                        </div>
                        <div class="w-full md:w-1/3 bg-slate-50 p-4 rounded-lg border border-slate-200 text-center">
                            <span class="text-slate-500 font-bold text-xs block mb-1">сѓ┐сЃ╝сѓ▓сЃЃсЃѕтЪ║уцјсѓ╣сѓ│сѓб (т╣│тЮЄ)</span> 
                            <b id="avgHistScore" class="text-4xl text-indigo-600 font-black tracking-tighter"></b>
                        </div>
                    </div>
                </div>
            </section>

            <!-- STEP 3: сѓисЃЪсЃЦсЃгсЃ╝сѓисЃДсЃ│ -->
            <section id="simulationSection" class="hidden bg-slate-800 text-white p-6 rounded-xl shadow-2xl relative overflow-hidden mt-8">
                <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 rounded-full blur-3xl opacity-20 -mr-10 -mt-10 pointer-events-none"></div>
                <h2 class="text-xl font-bold border-b border-slate-600 pb-2 mb-6 text-indigo-300">STEP 3: уб║ујЄжЂјуеІТюђжЂЕтїќсѓисЃЪсЃЦсЃгсЃ╝сѓисЃДсЃ│</h2>
                
                <div class="flex flex-col gap-5 mb-6 relative z-10">
                    <div class="flex flex-col md:flex-row md:items-start gap-4">
                        <label class="font-bold text-slate-300 shrink-0 mt-2">Уеѕу«ЌсЃбсЃ╝сЃЅ:</label>
                        <div class="flex flex-col gap-3 bg-slate-900/50 p-4 rounded-lg w-full border border-slate-700">
                            <label class="flex items-start gap-2 cursor-pointer group">
                                <input type="radio" name="simMode" value="count" checked class="mt-1 text-indigo-500 focus:ring-indigo-500 w-4 h-4">
                                <span class="text-sm group-hover:text-white transition">тЏъТЋ░ТїЄт«џсЃбсЃ│сЃєсѓФсЃФсЃГТ│Ћ<br><span class="text-xs text-slate-400">№╝ѕТїЄт«џсЂЌсЂЪтЏъТЋ░сЂасЂЉсЃЕсЃ│сЃђсЃасЂФућЪТѕљсЂЌсђЂсЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│сЂФУ┐ЉсЂёсѓѓсЂ«сѓњТійтЄ║№╝Ѕ</span></span>
                            </label>
                            <label class="flex items-start gap-2 cursor-pointer group pt-2 border-t border-slate-700/50">
                                <input type="radio" name="simMode" value="all" class="mt-1 text-indigo-500 focus:ring-indigo-500 w-4 h-4">
                                <span class="text-sm text-indigo-300 font-bold group-hover:text-indigo-200 transition">тЁе1,029СИЄсЃЉсѓ┐сЃ╝сЃ│т«їтЁеуиЈтйЊсЂЪсѓіУДБТъљ (Т┐ђжЂИТјетЦе)<br><span class="text-[10px] text-slate-400">№╝ѕтЁежђџсѓісѓњУеѕу«ЌсЂЌсђЂAIсЂїуЅ╣т«џсЂЌсЂЪуЈЙт«ЪсЂ«сЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│сЂФТюђсѓѓУ┐ЉсЂёТ│бсѓњТійтЄ║сђѓТЋ░уДњсђюТЋ░тЇЂуДњсЂІсЂІсѓісЂЙсЂЎ№╝Ѕ</span></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap items-center gap-6 p-4 bg-slate-900/30 rounded-lg border border-slate-700">
                        <div id="countModeUI" class="flex items-center gap-2">
                            <label class="font-bold text-slate-300 text-sm shrink-0">УЕдУАїтЏъТЋ░:</label>
                            <select id="simCount" class="p-2 border border-slate-600 rounded bg-slate-800 text-white text-sm outline-none focus:border-indigo-500">
                                <option value="10000">10,000тЏъ</option>
                                <option value="50000" selected>50,000тЏъ</option>
                                <option value="100000">100,000тЏъ</option>
                                <option value="300000">300,000тЏъ</option>
                            </select>
                        </div>
                        
                        <div id="allModeUI" class="flex items-center gap-2 hidden">
                            <span class="text-indigo-300 text-xs font-bold bg-indigo-900/50 px-3 py-1 rounded border border-indigo-700/50">Рђ╗сЃќсЃЕсѓдсѓХсЂ«ТђДУЃйсЂФсѓѕсѓітЄдуљєТЎѓжќЊсЂїуЋ░сЂфсѓісЂЙсЂЎ</span>
                        </div>

                        <div class="flex items-center gap-2 mt-2 md:mt-0">
                            <label class="font-bold text-slate-300 text-sm shrink-0">С║ѕТЃ│ТійтЄ║ТЋ░:</label>
                            <select id="ticketCount" class="p-2 border border-slate-600 rounded bg-slate-800 text-white text-sm outline-none focus:border-indigo-500">
                                <option value="3">3жђџсѓі</option>
                                <option value="5" selected>5жђџсѓі</option>
                                <option value="10">10жђџсѓі</option>
                            </select>
                        </div>
                    </div>
                </div>
                <button id="btnSimulate" class="w-full relative overflow-hidden bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-black py-4 px-4 rounded-xl shadow-[0_0_15px_rgba(79,70,229,0.5)] transition flex justify-center items-center gap-2 text-lg z-10 group">
                    <span class="relative z-10">­Ъј░ ТюђТќ░сѓбсЃФсѓ┤сЃфсѓ║сЃасЂДС║ѕТЃ│сѓњућЪТѕљсЂЎсѓІ</span>
                    <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity"></div>
                </button>
            </section>

            <!-- ухљТъюУАеуц║ -->
            <section id="resultSection" class="hidden mt-12">
                <h2 class="text-2xl font-black text-center text-slate-800 mb-8 tracking-wide">Рюе AIТюђжЂЕтїќ С║ѕТЃ│ухљТъю Рюе</h2>
                <div id="predictionResults" class="space-y-6">
                    <!-- JSсЂДухљТъюсѓњТї┐тЁЦ -->
                </div>
            </section>

        </div>
    </div>

    <script>
        // --- тѕЮТюЪсЃЄсЃ╝сѓ┐ (угг1тЏъсђюугг665тЏъ) ---
        // Рђ╗сЃЄсЃ╝сѓ┐жЄЈсЂ»жЮътИИсЂФтцџсЂёсЂЪсѓЂсђЂт«ЪжџЏсЂ«сѓбсЃЌсЃфсЂФтљѕсѓЈсЂЏсЂджЂЕт«юТЏ┤Тќ░сЂЌсЂдсЂЈсЂасЂЋсЂё
        const initialRawData = `угг1тЏъ,7,10,12,17,23,28,34,3,15
угг2тЏъ,20,24,29,31,33,34,35,12,32
угг3тЏъ,2,7,8,11,14,23,31,5,15
угг4тЏъ,12,13,22,23,24,28,29,2,14
угг5тЏъ,1,3,4,5,16,21,28,22,31
угг6тЏъ,5,15,19,23,30,34,35,6,25
угг7тЏъ,1,3,5,7,27,29,33,6,15
угг8тЏъ,2,21,28,29,30,32,36,6,8
угг9тЏъ,3,4,15,23,27,30,36,13,35
угг10тЏъ,1,2,3,6,24,28,30,16,20
угг11тЏъ,9,15,26,29,32,34,36,14,35
угг12тЏъ,11,12,14,19,26,27,33,24,32
угг13тЏъ,6,10,16,21,27,28,35,15,34
угг14тЏъ,4,7,8,9,24,28,30,34,36
угг15тЏъ,2,10,14,17,23,25,35,8,29
угг16тЏъ,5,6,9,13,16,21,23,8,34
угг17тЏъ,2,3,5,22,34,36,37,7,15
угг18тЏъ,12,17,21,24,29,31,36,20,26
угг19тЏъ,2,14,19,20,21,22,31,1,15
угг20тЏъ,2,5,13,20,21,23,28,11,22
угг21тЏъ,1,9,13,15,25,30,33,19,28
угг22тЏъ,2,4,8,9,15,23,25,3,10
угг23тЏъ,4,8,11,25,28,29,30,14,32
угг24тЏъ,4,5,8,10,16,19,33,2,29
угг25тЏъ,1,6,11,16,17,18,21,10,24
угг26тЏъ,11,13,16,18,26,31,36,21,27
угг27тЏъ,1,10,11,14,17,18,28,25,26
угг28тЏъ,6,7,12,15,19,35,37,1,11
угг29тЏъ,2,3,16,17,24,26,28,15,31
угг30тЏъ,6,8,13,22,26,32,36,16,34
угг31тЏъ,9,12,13,19,23,33,34,20,32
угг32тЏъ,3,8,15,18,27,29,37,31,34
угг33тЏъ,1,4,17,24,29,33,36,19,30
угг34тЏъ,4,6,7,23,24,32,35,8,27
угг35тЏъ,1,16,18,19,25,30,34,26,36
угг36тЏъ,5,6,10,11,20,28,36,25,37
угг37тЏъ,7,8,10,13,14,19,37,29,33
угг38тЏъ,4,14,19,22,24,29,34,8,31
угг39тЏъ,7,13,19,23,25,26,30,1,18
угг40тЏъ,2,6,11,23,26,31,34,7,20
угг41тЏъ,2,3,8,15,34,35,36,25,28
угг42тЏъ,2,15,16,17,23,31,33,8,26
угг43тЏъ,4,6,7,8,24,31,37,5,13
угг44тЏъ,3,4,6,15,27,28,29,1,14
угг45тЏъ,1,2,9,18,21,27,33,25,31
угг46тЏъ,2,5,6,15,23,27,30,4,35
угг47тЏъ,2,9,11,14,20,21,36,6,15
угг48тЏъ,3,5,24,26,29,30,34,8,35
угг49тЏъ,8,11,12,17,24,26,27,14,21
угг50тЏъ,3,4,7,8,15,24,29,11,16
угг51тЏъ,1,4,5,8,20,23,35,15,33
угг52тЏъ,8,10,22,24,26,32,34,5,9
угг53тЏъ,1,4,14,16,20,33,36,12,30
угг54тЏъ,1,3,5,10,18,22,23,7,35
угг55тЏъ,4,12,14,17,23,30,36,13,33
угг56тЏъ,4,23,26,27,28,32,36,29,30
угг57тЏъ,5,6,12,16,17,20,33,8,32
угг58тЏъ,1,6,7,8,23,32,33,11,34
угг59тЏъ,5,8,12,13,21,30,35,27,34
угг60тЏъ,3,7,9,15,16,23,34,5,33
угг61тЏъ,5,10,11,21,28,31,37,13,14
угг62тЏъ,4,10,12,15,27,32,33,9,16
угг63тЏъ,4,8,19,24,28,30,32,12,37
угг64тЏъ,4,15,16,17,20,29,36,19,26
угг65тЏъ,4,7,12,22,23,24,28,25,34
угг66тЏъ,1,11,25,28,31,33,37,3,20
угг67тЏъ,7,11,15,17,18,25,35,6,33
угг68тЏъ,2,7,13,15,24,34,35,12,23
угг69тЏъ,13,17,20,22,28,29,37,11,12
угг70тЏъ,9,10,18,21,27,33,35,4,11
угг71тЏъ,1,6,13,29,34,35,37,2,15
угг72тЏъ,11,12,18,19,20,31,32,9,21
угг73тЏъ,12,16,23,25,27,30,32,28,33
угг74тЏъ,5,13,14,15,16,24,31,9,11
угг75тЏъ,4,9,15,17,19,35,37,10,20
угг76тЏъ,4,13,18,29,32,34,36,24,33
угг77тЏъ,3,10,23,25,26,28,30,15,29
угг78тЏъ,5,6,10,14,24,28,36,7,20
угг79тЏъ,2,4,7,9,21,29,37,6,36
угг80тЏъ,2,5,10,18,21,24,27,25,34
угг81тЏъ,1,3,10,18,28,31,35,9,21
угг82тЏъ,1,3,16,20,25,27,34,18,37
угг83тЏъ,1,11,21,26,28,32,35,18,22
угг84тЏъ,8,16,23,28,29,35,36,12,37
угг85тЏъ,6,7,10,11,22,26,35,14,23
угг86тЏъ,3,10,20,21,22,26,30,24,35
угг87тЏъ,8,9,12,18,20,28,31,13,15
угг88тЏъ,3,4,10,14,25,29,30,18,19
угг89тЏъ,1,3,11,26,28,34,36,17,20
угг90тЏъ,2,8,9,13,14,18,37,11,25
угг91тЏъ,1,5,7,14,15,25,35,18,24
угг92тЏъ,4,5,15,25,26,29,32,11,27
угг93тЏъ,2,5,11,14,17,30,32,31,37
угг94тЏъ,13,19,20,27,28,29,30,26,36
угг95тЏъ,1,8,13,14,18,30,34,26,36
угг96тЏъ,9,11,14,21,22,23,24,10,36
угг97тЏъ,7,13,14,16,22,24,35,1,29
угг98тЏъ,3,9,11,13,19,25,33,10,30
угг99тЏъ,13,17,22,24,27,28,35,11,19
угг100тЏъ,1,2,11,16,25,35,36,9,14
угг101тЏъ,11,12,21,23,28,36,37,3,16
угг102тЏъ,1,4,8,27,28,29,31,13,25
угг103тЏъ,2,3,11,12,22,35,36,30,34
угг104тЏъ,7,9,11,15,16,22,37,12,13
угг105тЏъ,3,15,19,20,26,28,33,17,21
угг106тЏъ,6,10,12,19,21,22,30,1,11
угг107тЏъ,3,8,9,13,17,27,33,29,31
угг108тЏъ,2,6,7,8,28,30,36,18,21
угг109тЏъ,6,17,20,21,24,30,32,7,23
угг110тЏъ,4,12,22,30,31,35,36,19,37
угг111тЏъ,7,8,9,24,28,30,33,1,34
угг112тЏъ,6,7,10,15,27,35,36,13,20
угг113тЏъ,4,6,7,9,15,17,37,14,20
угг114тЏъ,8,13,26,27,28,29,37,4,12
угг115тЏъ,6,8,13,14,20,25,27,24,26
угг116тЏъ,9,14,23,27,28,31,32,3,20
угг117тЏъ,9,10,20,28,31,34,37,23,26
угг118тЏъ,5,8,9,24,27,28,30,16,20
угг119тЏъ,3,6,8,14,15,25,36,24,35
угг120тЏъ,2,16,18,26,32,35,37,9,36
угг121тЏъ,2,4,13,16,21,30,37,19,29
угг122тЏъ,2,16,18,26,27,34,35,5,12
угг123тЏъ,1,3,5,8,29,34,36,23,28
угг124тЏъ,1,2,15,17,18,22,36,6,27
угг125тЏъ,1,6,11,14,19,28,35,18,21
угг126тЏъ,4,10,13,16,17,21,27,1,18
угг127тЏъ,10,12,15,23,28,30,35,6,25
угг128тЏъ,2,4,8,23,26,27,32,3,35
угг129тЏъ,5,7,11,19,24,27,30,29,35
угг130тЏъ,1,15,20,23,25,31,32,5,24
угг131тЏъ,3,4,12,17,32,34,36,23,31
угг132тЏъ,7,10,14,16,20,30,31,35,37
угг133тЏъ,3,7,13,15,17,21,30,14,27
угг134тЏъ,4,9,20,28,30,34,35,12,29
угг135тЏъ,8,9,13,14,24,32,34,3,4
угг136тЏъ,10,17,24,27,30,33,37,18,31
угг137тЏъ,13,19,21,25,27,32,35,16,20
угг138тЏъ,2,5,17,20,21,32,33,30,35
угг139тЏъ,9,16,18,21,23,34,35,4,36
угг140тЏъ,3,11,12,13,17,26,35,1,33
угг141тЏъ,2,10,18,30,31,32,36,21,29
угг142тЏъ,6,12,14,18,21,27,28,1,33
угг143тЏъ,1,3,8,14,28,29,33,4,31
угг144тЏъ,2,9,13,18,22,32,36,17,26
угг145тЏъ,10,12,18,28,29,30,35,4,19
угг146тЏъ,4,10,25,27,28,33,34,15,35
угг147тЏъ,1,5,7,12,15,24,25,8,14
угг148тЏъ,1,9,11,16,20,30,34,12,33
угг149тЏъ,1,4,15,19,22,23,31,12,32
угг150тЏъ,6,7,14,20,27,31,34,11,24
угг151тЏъ,9,10,13,15,21,22,24,4,8
угг152тЏъ,8,12,17,21,23,24,31,6,7
угг153тЏъ,7,9,10,16,20,28,37,2,33
угг154тЏъ,2,4,19,21,24,28,35,3,13
угг155тЏъ,2,9,13,18,22,24,26,10,37
угг156тЏъ,4,9,16,19,22,33,34,17,36
угг157тЏъ,5,9,16,26,28,29,32,1,37
угг158тЏъ,3,6,7,30,32,36,37,5,20
угг159тЏъ,10,14,17,21,23,27,31,16,24
угг160тЏъ,1,2,8,24,32,36,37,23,33
угг161тЏъ,8,14,17,18,20,22,34,4,30
угг162тЏъ,2,7,8,12,14,23,27,6,10
угг163тЏъ,1,2,6,16,28,30,31,3,7
угг164тЏъ,3,13,20,23,31,35,36,2,11
угг165тЏъ,9,11,14,15,16,18,27,6,20
угг166тЏъ,14,20,27,29,30,31,37,23,34
угг167тЏъ,1,3,5,7,10,26,36,19,37
угг168тЏъ,3,9,12,14,19,20,36,2,5
угг169тЏъ,1,5,10,20,21,28,30,25,26
угг170тЏъ,3,5,6,9,27,32,36,12,24
угг171тЏъ,1,2,6,21,23,27,28,11,16
угг172тЏъ,5,20,21,27,30,31,36,9,26
угг173тЏъ,7,9,19,22,24,27,30,4,28
угг174тЏъ,10,13,14,15,23,31,32,4,29
угг175тЏъ,6,17,21,31,33,35,37,14,18
угг176тЏъ,1,11,12,17,22,30,35,15,16
угг177тЏъ,9,15,19,23,25,34,36,2,35
угг178тЏъ,6,9,11,15,26,34,36,13,37
угг179тЏъ,4,9,12,13,22,26,36,5,33
угг180тЏъ,1,8,11,21,23,25,28,5,37
угг181тЏъ,7,8,10,13,19,23,24,15,27
угг182тЏъ,1,7,10,11,20,23,30,3,37
угг183тЏъ,6,15,20,26,33,34,37,19,29
угг184тЏъ,7,14,18,22,23,26,34,2,32
угг185тЏъ,1,2,4,16,26,29,34,11,12
угг186тЏъ,5,14,16,19,31,33,37,21,28
угг187тЏъ,4,6,10,23,24,32,36,15,31
угг188тЏъ,6,15,19,25,26,30,31,14,18
угг189тЏъ,3,7,8,10,18,23,35,1,19
угг190тЏъ,2,11,12,18,21,33,36,8,34
угг191тЏъ,8,15,21,24,26,27,29,7,30
угг192тЏъ,12,13,14,19,25,33,34,3,22
угг193тЏъ,4,6,20,21,22,24,31,9,10
угг194тЏъ,3,6,27,30,31,32,36,14,23
угг195тЏъ,4,7,12,20,23,24,31,26,35
угг196тЏъ,7,13,15,25,30,32,37,8,14
угг197тЏъ,6,8,10,12,16,21,28,14,23
угг198тЏъ,18,21,31,32,33,36,37,5,25
угг199тЏъ,1,9,17,20,22,28,29,13,16
угг200тЏъ,13,14,17,21,27,28,34,1,11
угг201тЏъ,8,11,17,24,28,31,32,12,34
угг202тЏъ,3,7,11,16,22,34,37,29,32
угг203тЏъ,6,13,17,22,32,33,36,12,28
угг204тЏъ,5,19,20,21,30,34,36,7,12
угг205тЏъ,4,5,19,31,35,36,37,27,32
угг206тЏъ,1,6,7,11,27,35,36,22,26
угг207тЏъ,4,5,10,13,28,32,33,19,26
угг208тЏъ,4,13,16,18,22,26,33,27,29
угг209тЏъ,3,4,6,13,22,31,36,28,34
угг210тЏъ,2,4,6,11,15,19,36,23,34
угг211тЏъ,7,15,22,25,31,32,35,29,36
угг212тЏъ,4,6,10,19,20,24,29,1,27
угг213тЏъ,5,13,15,18,19,24,35,20,23
угг214тЏъ,2,6,9,12,31,36,37,3,22
угг215тЏъ,11,12,13,21,29,36,37,7,9
угг216тЏъ,9,14,22,24,25,36,37,8,28
угг217тЏъ,4,6,26,27,28,35,36,24,34
угг218тЏъ,15,16,17,21,26,29,30,10,34
угг219тЏъ,6,9,13,14,21,25,31,2,4
угг220тЏъ,7,9,11,18,25,28,35,20,27
угг221тЏъ,1,2,9,11,17,30,35,13,36
угг222тЏъ,3,9,18,21,23,27,29,35,37
угг223тЏъ,10,13,19,21,26,33,34,24,25
угг224тЏъ,2,4,7,10,12,29,34,1,21
угг225тЏъ,13,15,17,18,20,21,26,25,29
угг226тЏъ,12,17,21,24,26,30,32,10,22
угг227тЏъ,2,3,7,9,22,23,26,29,30
угг228тЏъ,6,11,14,21,24,28,31,22,36
угг229тЏъ,2,3,9,30,33,36,37,1,32
угг230тЏъ,3,5,8,15,22,25,27,18,31
угг231тЏъ,4,15,18,24,25,34,36,10,26
угг232тЏъ,2,4,7,9,15,35,37,10,23
угг233тЏъ,3,13,17,25,26,27,29,8,37
угг234тЏъ,7,14,15,16,23,25,30,5,34
угг235тЏъ,2,9,13,18,21,33,34,3,11
угг236тЏъ,19,22,23,34,35,36,37,10,30
угг237тЏъ,3,4,7,19,20,21,29,8,33
угг238тЏъ,3,21,26,33,34,35,37,23,31
угг239тЏъ,8,13,17,21,23,28,37,1,14
угг240тЏъ,9,12,14,24,29,31,35,5,30
угг241тЏъ,5,11,12,19,21,26,28,4,20
угг242тЏъ,1,5,13,17,31,32,35,19,24
угг243тЏъ,6,9,13,18,20,22,30,11,14
угг244тЏъ,2,9,17,22,32,34,36,11,12
угг245тЏъ,2,8,9,11,24,26,27,7,36
угг246тЏъ,3,6,9,19,23,25,31,21,36
угг247тЏъ,10,12,13,16,34,35,36,11,37
угг248тЏъ,1,5,6,22,25,27,31,12,18
угг249тЏъ,9,20,28,29,31,34,37,5,25
угг250тЏъ,5,9,10,13,26,30,34,18,23
угг251тЏъ,1,15,20,26,28,34,37,23,30
угг252тЏъ,8,23,24,25,27,30,31,11,17
угг253тЏъ,6,7,9,12,15,17,24,26,29
угг254тЏъ,1,12,14,18,23,24,31,7,26
угг255тЏъ,1,4,11,13,15,21,32,5,10
угг256тЏъ,14,21,24,27,30,33,37,19,20
угг257тЏъ,5,15,16,26,27,32,35,23,28
угг258тЏъ,1,3,11,20,23,32,35,25,26
угг259тЏъ,5,6,15,19,22,29,32,4,31
угг260тЏъ,4,8,12,23,29,31,34,5,6
угг261тЏъ,4,14,15,17,21,23,26,7,8
угг262тЏъ,2,6,7,9,19,23,36,5,15
угг263тЏъ,1,5,11,16,27,35,36,6,14
угг264тЏъ,8,13,15,17,21,26,29,4,24
угг265тЏъ,12,13,15,19,21,24,36,10,37
угг266тЏъ,6,11,15,17,20,27,32,16,22
угг267тЏъ,8,13,18,20,23,25,26,6,28
угг268тЏъ,4,5,9,15,29,31,33,26,27
угг269тЏъ,1,9,15,24,31,33,36,2,26
угг270тЏъ,1,2,11,13,15,24,25,26,28
угг271тЏъ,1,9,15,16,19,32,35,14,31
угг272тЏъ,2,5,8,15,18,26,31,19,25
угг273тЏъ,13,15,21,23,26,32,34,5,9
угг274тЏъ,9,14,21,23,25,26,37,7,29
угг275тЏъ,8,9,15,19,24,25,35,34,37
угг276тЏъ,3,6,12,17,22,34,35,2,33
угг277тЏъ,6,7,9,11,21,23,25,1,22
угг278тЏъ,6,9,14,21,23,33,36,27,28
угг279тЏъ,7,11,15,17,19,23,31,9,37
угг280тЏъ,4,9,10,11,24,32,35,2,37
угг281тЏъ,1,2,17,19,20,22,26,30,36
угг282тЏъ,10,17,18,25,29,35,36,7,14
угг283тЏъ,13,14,15,17,23,29,31,10,19
угг284тЏъ,6,7,10,25,29,30,33,1,31
угг285тЏъ,11,15,21,26,30,34,35,4,36
угг286тЏъ,4,5,14,17,18,29,37,27,31
угг287тЏъ,2,7,10,20,24,29,34,4,8
угг288тЏъ,1,8,9,16,27,32,37,17,31
угг289тЏъ,2,7,10,12,16,17,34,23,25
угг290тЏъ,3,13,22,26,31,32,37,29,35
угг291тЏъ,1,11,18,19,21,29,37,5,15
угг292тЏъ,12,15,25,26,27,29,35,24,30
угг293тЏъ,11,13,15,20,27,29,35,1,7
угг294тЏъ,3,4,6,10,14,22,29,28,32
угг295тЏъ,4,5,6,8,9,22,32,13,26
угг296тЏъ,1,8,10,12,18,28,29,25,27
угг297тЏъ,2,3,11,16,23,28,36,8,24
угг298тЏъ,1,3,8,11,18,19,22,26,30
угг299тЏъ,1,6,10,13,16,26,36,28,30
угг300тЏъ,4,7,21,31,33,34,35,6,12
угг301тЏъ,4,11,12,25,27,30,33,5,19
угг302тЏъ,8,16,26,27,28,32,34,4,25
угг303тЏъ,4,7,14,17,21,34,37,10,30
угг304тЏъ,7,9,10,17,28,33,36,18,23
угг305тЏъ,6,17,23,24,27,28,31,10,18
угг306тЏъ,12,13,15,22,25,33,35,1,31
угг307тЏъ,5,8,15,24,25,32,35,20,26
угг308тЏъ,5,6,11,15,20,32,33,13,25
угг309тЏъ,1,7,13,14,16,21,22,18,34
угг310тЏъ,17,25,26,28,31,32,37,6,9
угг311тЏъ,9,11,18,24,26,27,37,30,33
угг312тЏъ,1,2,4,18,20,29,34,17,30
угг313тЏъ,9,13,16,23,28,29,30,1,20
угг314тЏъ,3,6,8,19,32,34,35,12,30
угг315тЏъ,3,11,18,26,30,33,37,28,31
угг316тЏъ,3,9,10,17,30,33,34,6,8
угг317тЏъ,7,8,14,15,16,20,29,18,19
угг318тЏъ,4,5,10,12,27,34,36,3,14
угг319тЏъ,2,6,14,23,28,31,35,19,27
угг320тЏъ,5,6,18,22,26,33,34,36,37
угг321тЏъ,15,24,27,28,29,34,35,9,25
угг322тЏъ,1,10,11,21,26,29,30,14,20
угг323тЏъ,11,14,15,21,26,34,36,23,27
угг324тЏъ,9,13,16,17,18,19,20,30,36
угг325тЏъ,4,14,17,18,21,31,33,6,20
угг326тЏъ,1,2,17,18,24,27,29,12,32
угг327тЏъ,1,3,13,14,16,30,31,2,17
угг328тЏъ,3,9,10,14,19,24,30,18,21
угг329тЏъ,3,10,19,20,26,28,30,15,25
угг330тЏъ,3,4,10,12,17,18,20,19,32
угг331тЏъ,5,7,11,12,15,18,20,19,30
угг332тЏъ,5,7,10,15,24,27,30,3,33
угг333тЏъ,1,4,10,11,16,24,34,30,32
угг334тЏъ,3,7,15,16,30,34,35,8,29
угг335тЏъ,9,10,17,18,22,25,35,13,14
угг336тЏъ,9,10,13,21,25,31,33,24,37
угг337тЏъ,5,7,10,12,14,24,35,11,33
угг338тЏъ,7,9,16,17,23,27,34,15,36
угг339тЏъ,11,15,18,20,23,25,32,9,37
угг340тЏъ,6,14,17,26,27,30,36,12,28
угг341тЏъ,4,11,17,27,29,31,36,19,24
угг342тЏъ,3,6,24,28,32,35,36,4,8
угг343тЏъ,17,19,22,29,30,31,32,11,16
угг344тЏъ,11,19,28,29,31,32,37,12,21
угг345тЏъ,6,9,10,18,28,31,32,24,35
угг346тЏъ,11,16,18,23,30,31,35,3,27
угг347тЏъ,3,6,11,13,18,20,34,25,35
угг348тЏъ,2,5,17,18,19,20,33,1,24
угг349тЏъ,4,10,11,15,18,22,34,16,32
угг350тЏъ,10,19,21,23,24,30,37,2,28
угг351тЏъ,8,13,17,19,23,25,28,5,16
угг352тЏъ,3,4,14,18,26,30,32,28,34
угг353тЏъ,11,15,22,23,24,29,33,19,34
угг354тЏъ,1,2,8,10,13,25,31,23,35
угг355тЏъ,4,6,9,10,23,27,33,14,31
угг356тЏъ,4,16,20,30,33,34,36,19,21
угг357тЏъ,5,8,12,13,14,24,30,27,35
угг358тЏъ,5,13,14,26,32,33,34,8,11
угг359тЏъ,4,7,11,17,19,26,35,1,24
угг360тЏъ,9,11,13,14,20,22,37,15,17
угг361тЏъ,5,9,16,20,29,33,35,2,8
угг362тЏъ,4,7,8,14,22,24,27,13,26
угг363тЏъ,13,15,17,22,26,34,36,3,19
угг364тЏъ,3,9,10,14,16,20,27,19,33
угг365тЏъ,1,4,13,14,16,22,35,10,23
угг366тЏъ,10,24,25,26,27,33,36,4,23
угг367тЏъ,8,14,19,20,29,30,31,7,35
угг368тЏъ,7,8,9,13,21,34,35,3,20
угг369тЏъ,1,7,9,11,15,31,34,6,33
угг370тЏъ,7,10,16,25,26,33,34,24,35
угг371тЏъ,1,3,4,8,11,21,25,12,23
угг372тЏъ,6,8,22,23,32,33,36,9,27
угг373тЏъ,2,3,17,18,22,23,31,4,30
угг374тЏъ,4,5,9,10,18,27,35,15,34
угг375тЏъ,13,15,18,19,23,27,32,34,35
угг376тЏъ,6,11,14,17,23,31,37,10,15
угг377тЏъ,6,7,10,17,25,33,36,27,32
угг378тЏъ,1,5,9,10,14,15,29,20,28
угг379тЏъ,3,8,15,22,24,29,35,18,26
угг380тЏъ,8,14,24,25,32,34,36,13,16
угг381тЏъ,4,8,25,26,27,31,32,9,22
угг382тЏъ,2,3,5,8,19,22,37,16,28
угг383тЏъ,8,11,15,22,26,28,30,10,20
угг384тЏъ,3,7,15,18,26,30,31,9,33
угг385тЏъ,4,12,14,24,29,34,35,5,15
угг386тЏъ,9,19,22,32,35,36,37,7,21
угг387тЏъ,3,7,13,22,30,32,37,14,15
угг388тЏъ,1,6,8,10,18,21,32,13,28
угг389тЏъ,1,6,11,13,18,24,27,17,23
угг390тЏъ,3,6,19,21,23,26,27,30,34
угг391тЏъ,10,23,27,32,33,35,37,24,26
угг392тЏъ,1,4,6,15,20,22,26,18,21
угг393тЏъ,7,14,15,22,27,30,31,9,32
угг394тЏъ,6,10,22,23,27,32,33,8,19
угг395тЏъ,1,2,5,20,26,29,32,8,9
угг396тЏъ,2,3,5,8,16,20,34,26,31
угг397тЏъ,4,12,13,15,21,28,37,7,20
угг398тЏъ,3,4,10,17,20,22,33,1,6
угг399тЏъ,7,15,19,20,21,33,36,4,10
угг400тЏъ,4,17,22,28,30,31,35,25,34
угг401тЏъ,4,5,9,14,18,30,35,1,33
угг402тЏъ,7,9,12,17,20,26,29,4,13
угг403тЏъ,2,6,8,12,19,20,29,5,26
угг404тЏъ,4,8,13,16,25,30,32,9,26
угг405тЏъ,3,10,16,17,24,32,36,11,29
угг406тЏъ,1,2,5,16,18,21,29,24,25
угг407тЏъ,19,21,25,26,28,30,31,9,16
угг408тЏъ,16,18,19,21,29,30,35,14,28
угг409тЏъ,13,15,16,24,30,31,37,12,33
угг410тЏъ,1,2,18,21,26,29,37,9,36
угг411тЏъ,4,11,12,21,23,27,36,9,14
угг412тЏъ,14,20,22,29,31,33,34,15,24
угг413тЏъ,3,10,16,18,19,34,35,27,36
угг414тЏъ,3,8,16,21,25,36,37,14,20
угг415тЏъ,4,8,12,13,23,32,37,16,35
угг416тЏъ,8,9,10,15,16,30,31,29,36
угг417тЏъ,4,5,13,18,23,27,32,9,11
угг418тЏъ,10,13,17,18,22,28,37,1,30
угг419тЏъ,3,11,14,21,26,29,34,22,33
угг420тЏъ,4,5,11,13,24,32,34,2,3
угг421тЏъ,9,15,18,26,28,32,37,21,36
угг422тЏъ,1,9,21,23,30,35,36,5,6
угг423тЏъ,1,7,9,11,29,31,32,2,6
угг424тЏъ,5,6,12,19,25,30,35,26,33
угг425тЏъ,2,9,14,20,22,34,35,7,24
угг426тЏъ,1,2,6,8,30,31,33,13,35
угг427тЏъ,11,13,26,27,31,33,37,9,18
угг428тЏъ,3,6,16,22,31,34,35,24,32
угг429тЏъ,6,11,14,27,30,32,35,18,24
угг430тЏъ,2,12,17,24,28,30,32,3,27
угг431тЏъ,7,11,12,17,19,20,26,2,3
угг432тЏъ,5,10,13,24,29,30,35,21,31
угг433тЏъ,14,17,20,25,32,33,36,10,34
угг434тЏъ,10,11,12,17,29,34,37,26,30
угг435тЏъ,3,5,7,11,15,17,25,13,32
угг436тЏъ,5,6,21,22,26,31,32,18,36
угг437тЏъ,8,10,14,15,23,25,26,1,11
угг438тЏъ,4,13,16,21,32,34,37,27,33
угг439тЏъ,1,3,6,9,26,29,31,14,18
угг440тЏъ,5,10,17,18,19,22,32,14,35
угг441тЏъ,15,21,22,23,27,28,37,8,25
угг442тЏъ,6,13,14,16,19,30,32,25,36
угг443тЏъ,1,5,8,26,28,32,36,23,24
угг444тЏъ,11,15,16,17,18,27,29,25,33
угг445тЏъ,4,22,25,27,28,30,33,2,3
угг446тЏъ,1,7,9,12,15,29,32,11,28
угг447тЏъ,3,5,8,13,26,30,37,25,28
угг448тЏъ,7,21,24,29,32,36,37,22,27
угг449тЏъ,2,21,26,27,32,33,34,8,9
угг450тЏъ,2,7,12,15,21,23,30,9,31
угг451тЏъ,2,15,22,25,28,33,37,10,17
угг452тЏъ,5,17,20,21,31,34,35,8,27
угг453тЏъ,2,8,10,21,24,26,35,9,13
угг454тЏъ,8,17,21,26,27,29,31,1,33
угг455тЏъ,1,5,8,15,18,26,36,33,34
угг456тЏъ,9,15,17,18,22,25,31,33,36
угг457тЏъ,7,14,19,27,31,35,36,9,33
угг458тЏъ,7,11,12,14,19,21,33,6,37
угг459тЏъ,2,4,7,8,10,20,29,14,33
угг460тЏъ,5,6,9,23,27,28,30,4,13
угг461тЏъ,2,13,19,22,32,35,37,14,33
угг462тЏъ,7,11,24,27,29,34,35,4,18
угг463тЏъ,3,7,13,16,19,24,30,6,10
угг464тЏъ,7,8,13,17,30,32,36,1,10
угг465тЏъ,1,4,5,13,27,31,35,15,22
угг466тЏъ,5,6,8,14,15,25,29,18,33
угг467тЏъ,7,8,11,13,14,26,30,31,34
угг468тЏъ,3,12,15,16,25,29,37,26,28
угг469тЏъ,1,6,8,13,16,30,33,23,28
угг470тЏъ,2,3,9,16,27,32,36,1,34
угг471тЏъ,3,5,7,8,11,19,34,17,32
угг472тЏъ,5,7,8,32,33,34,36,4,6
угг473тЏъ,6,11,21,24,28,33,37,8,27
угг474тЏъ,3,17,19,21,24,32,34,27,28
угг475тЏъ,1,2,22,24,26,31,37,12,19
угг476тЏъ,4,7,9,15,22,24,31,21,37
угг477тЏъ,2,5,9,19,25,32,37,7,29
угг478тЏъ,6,8,11,13,16,20,32,12,34
угг479тЏъ,8,11,13,18,24,30,31,21,23
угг480тЏъ,10,13,19,21,26,30,36,22,34
угг481тЏъ,1,10,13,14,16,25,27,5,21
угг482тЏъ,2,5,14,15,17,19,36,8,34
угг483тЏъ,2,11,20,23,25,36,37,29,34
угг484тЏъ,1,4,6,9,13,22,31,29,30
угг485тЏъ,4,6,17,20,22,24,26,8,9
угг486тЏъ,8,13,15,23,24,31,35,14,19
угг487тЏъ,9,10,13,15,26,34,37,22,36
угг488тЏъ,3,13,16,18,19,20,35,2,11
угг489тЏъ,3,6,7,15,25,29,31,8,14
угг490тЏъ,12,14,18,21,23,29,37,7,15
угг491тЏъ,3,14,17,21,22,32,35,6,30
угг492тЏъ,7,10,12,15,23,31,37,9,18
угг493тЏъ,5,13,14,20,21,25,31,9,36
угг494тЏъ,7,9,12,22,28,29,32,17,19
угг495тЏъ,2,16,19,20,22,33,36,6,32
угг496тЏъ,5,8,15,18,25,27,36,10,26
угг497тЏъ,18,20,24,26,27,30,33,17,19
угг498тЏъ,6,8,12,20,21,24,29,4,18
угг499тЏъ,5,9,14,18,27,32,34,6,12
угг500тЏъ,17,18,24,30,31,32,35,6,36
угг501тЏъ,1,2,4,7,12,14,31,30,33
угг502тЏъ,1,2,12,17,21,22,33,4,30
угг503тЏъ,5,7,8,13,23,26,33,31,37
угг504тЏъ,1,3,4,5,6,29,31,11,14
угг505тЏъ,9,10,12,15,16,28,36,1,23
угг506тЏъ,8,14,19,22,29,31,37,3,21
угг507тЏъ,4,19,25,26,30,32,36,1,15
угг508тЏъ,1,5,6,9,16,26,31,25,33
угг509тЏъ,10,14,22,26,27,32,33,20,37
угг510тЏъ,3,5,9,11,17,33,37,4,22
угг511тЏъ,1,9,14,24,28,36,37,16,31
угг512тЏъ,5,7,17,22,25,26,28,3,23
угг513тЏъ,1,4,10,13,15,19,37,16,20
угг514тЏъ,1,5,10,17,20,27,37,3,22
угг515тЏъ,3,15,17,22,26,27,28,6,8
угг516тЏъ,7,12,15,16,18,25,36,9,19
угг517тЏъ,3,6,10,16,26,29,31,7,24
угг518тЏъ,5,8,11,24,30,32,36,4,35
угг519тЏъ,1,2,8,14,17,21,34,20,26
угг520тЏъ,9,22,25,28,33,34,37,15,16
угг521тЏъ,21,24,25,27,30,33,36,3,31
угг522тЏъ,1,10,12,19,22,25,37,2,34
угг523тЏъ,3,17,19,27,28,32,35,2,34
угг524тЏъ,4,17,22,27,29,31,34,3,37
угг525тЏъ,11,14,17,18,21,25,31,1,27
угг526тЏъ,4,13,17,19,20,26,29,2,28
угг527тЏъ,4,8,12,25,27,32,34,15,17
угг528тЏъ,5,7,10,19,30,32,33,1,17
угг529тЏъ,7,9,13,14,22,26,29,10,21
угг530тЏъ,1,11,13,28,29,30,34,23,27
угг531тЏъ,4,6,9,11,14,28,30,10,12
угг532тЏъ,4,9,13,18,26,28,36,8,16
угг533тЏъ,2,4,9,11,14,25,37,29,32
угг534тЏъ,10,17,18,19,20,24,25,30,32
угг535тЏъ,5,11,12,19,29,32,36,9,26
угг536тЏъ,8,12,16,17,22,28,34,9,37
угг537тЏъ,2,3,9,13,14,35,37,4,17
угг538тЏъ,1,2,11,12,16,25,28,6,22
угг539тЏъ,4,6,8,18,20,27,35,24,26
угг540тЏъ,3,7,10,18,19,28,36,13,26
угг541тЏъ,6,14,23,25,27,28,34,19,37
угг542тЏъ,2,9,26,31,33,35,36,15,20
угг543тЏъ,2,11,13,18,23,24,36,17,26
угг544тЏъ,10,11,18,21,22,29,34,4,32
угг545тЏъ,3,12,16,17,27,30,34,15,37
угг546тЏъ,7,14,17,28,33,35,36,13,27
угг547тЏъ,4,11,14,18,23,25,29,17,32
угг548тЏъ,1,13,16,17,18,25,30,20,34
угг549тЏъ,13,19,20,28,33,34,35,4,32
угг550тЏъ,7,8,13,22,24,29,30,10,35
угг551тЏъ,15,16,17,22,29,32,37,23,24
угг552тЏъ,7,11,12,16,18,33,34,1,14
угг553тЏъ,2,6,13,15,16,20,33,9,28
угг554тЏъ,4,10,15,17,29,32,36,13,30
угг555тЏъ,9,12,17,19,26,32,34,11,22
угг556тЏъ,17,20,26,28,29,33,35,1,6
угг557тЏъ,3,5,7,10,17,18,35,2,21
угг558тЏъ,15,20,21,22,23,26,34,6,10
угг559тЏъ,3,4,10,13,15,18,22,2,16
угг560тЏъ,3,20,29,32,33,34,35,2,24
угг561тЏъ,6,8,19,20,27,32,37,13,33
угг562тЏъ,2,14,15,20,28,30,34,3,4
угг563тЏъ,1,4,6,14,16,19,31,12,18
угг564тЏъ,9,13,15,18,22,24,30,6,27
угг565тЏъ,3,6,9,11,19,30,36,1,33
угг566тЏъ,3,5,18,25,28,35,37,7,8
угг567тЏъ,6,8,16,18,19,34,37,15,30
угг568тЏъ,8,18,20,29,30,33,34,5,23
угг569тЏъ,12,15,17,22,30,34,35,5,9
угг570тЏъ,1,3,9,12,25,26,35,29,31
угг571тЏъ,13,26,27,29,30,34,37,2,23
угг572тЏъ,1,2,4,19,21,26,28,3,25
угг573тЏъ,11,12,18,19,23,26,31,15,25
угг574тЏъ,4,5,13,16,22,23,35,36,37
угг575тЏъ,2,12,18,20,25,28,30,9,23
угг576тЏъ,11,13,14,18,19,23,31,7,27
угг577тЏъ,11,13,19,25,29,36,37,18,30
угг578тЏъ,2,15,19,20,22,31,36,13,23
угг579тЏъ,7,19,23,33,34,35,36,5,10
угг580тЏъ,4,13,14,15,17,27,33,2,11
угг581тЏъ,3,8,10,15,18,23,37,17,24
угг582тЏъ,5,7,22,29,30,32,36,3,33
угг583тЏъ,1,5,8,9,20,30,37,11,26
угг584тЏъ,10,11,12,17,23,30,36,20,21
угг585тЏъ,6,11,13,14,16,27,34,12,25
угг586тЏъ,1,2,4,14,15,22,23,13,36
угг587тЏъ,15,18,21,22,23,25,32,1,30
угг588тЏъ,3,5,9,13,15,21,31,12,17
угг589тЏъ,1,6,8,9,14,29,33,5,23
угг590тЏъ,1,3,9,10,15,25,35,19,28
угг591тЏъ,4,7,8,11,21,23,35,10,24
угг592тЏъ,3,8,11,15,19,24,32,14,30
угг593тЏъ,3,8,9,14,15,22,32,1,12
угг594тЏъ,5,12,21,25,27,34,36,10,32
угг595тЏъ,14,15,16,19,25,28,33,6,29
угг596тЏъ,1,9,16,19,23,29,32,5,37
угг597тЏъ,2,4,14,15,22,27,34,1,5
угг598тЏъ,1,4,7,11,12,18,26,3,33
угг599тЏъ,4,7,16,19,26,31,33,25,29
угг600тЏъ,1,2,12,16,19,29,32,9,37
угг601тЏъ,4,8,18,20,29,35,37,19,34
угг602тЏъ,7,15,18,24,29,31,34,5,25
угг603тЏъ,4,9,10,23,28,30,34,18,31
угг604тЏъ,4,6,9,12,25,31,36,27,30
угг605тЏъ,2,8,15,26,28,31,32,19,24
угг606тЏъ,9,17,18,20,22,27,36,25,37
угг607тЏъ,12,14,20,27,31,34,37,19,21
угг608тЏъ,7,10,11,18,20,29,30,32,36
угг609тЏъ,4,11,12,23,26,32,37,1,9
угг610тЏъ,1,8,9,23,24,31,36,21,28
угг611тЏъ,7,8,11,18,20,30,34,5,14
угг612тЏъ,5,13,16,23,27,31,34,26,33
угг613тЏъ,3,5,6,10,19,21,35,13,27
угг614тЏъ,14,21,22,23,24,28,34,5,37
угг615тЏъ,4,11,21,26,27,28,33,10,13
угг616тЏъ,7,15,20,28,29,34,36,1,35
угг617тЏъ,2,6,10,12,25,28,35,27,31
угг618тЏъ,7,17,20,23,24,34,36,25,35
угг619тЏъ,8,9,18,20,27,29,32,7,12
угг620тЏъ,2,4,8,10,12,29,32,6,13
угг621тЏъ,1,2,12,13,14,30,36,9,24
угг622тЏъ,1,10,28,29,30,33,34,21,27
угг623тЏъ,9,12,22,26,28,31,37,7,30
угг624тЏъ,2,14,15,26,27,34,36,9,24
угг625тЏъ,3,10,12,18,19,24,32,4,15
угг626тЏъ,1,3,7,12,17,32,34,14,30
угг627тЏъ,9,15,21,30,33,34,37,10,35
угг628тЏъ,1,8,9,11,18,27,35,16,34
угг629тЏъ,2,7,9,21,23,24,30,22,29
угг630тЏъ,4,6,8,23,28,29,34,10,19
угг631тЏъ,2,3,6,17,33,35,36,25,37
угг632тЏъ,5,7,10,11,29,31,37,13,25
угг633тЏъ,2,5,10,17,21,31,36,20,32
угг634тЏъ,2,12,18,29,32,36,37,5,21
угг635тЏъ,10,12,20,29,30,31,34,4,15
угг636тЏъ,10,14,17,20,26,27,29,3,11
угг637тЏъ,1,4,7,8,9,20,21,11,30
угг638тЏъ,1,6,18,19,35,36,37,11,24
угг639тЏъ,5,9,12,15,30,31,34,13,29
угг640тЏъ,2,7,9,12,13,14,29,15,30
угг641тЏъ,1,3,7,23,24,33,36,17,30
угг642тЏъ,1,7,22,23,33,34,35,2,24
угг643тЏъ,1,5,15,16,18,27,34,19,22
угг644тЏъ,1,11,12,14,20,26,29,2,5
угг645тЏъ,7,10,16,20,26,32,35,24,33
угг646тЏъ,5,12,13,15,18,35,37,11,29
угг647тЏъ,4,5,9,13,17,22,28,18,31
угг648тЏъ,3,17,19,24,28,29,35,7,13
угг649тЏъ,12,22,23,26,33,35,37,2,21
угг650тЏъ,1,8,10,14,25,33,35,12,21
угг651тЏъ,2,13,19,20,24,26,35,29,36
угг652тЏъ,1,16,21,26,27,30,35,6,37
угг653тЏъ,6,7,12,25,26,30,33,13,15
угг654тЏъ,3,12,25,29,30,32,33,28,31
угг655тЏъ,4,5,12,13,24,26,33,3,14
угг656тЏъ,1,4,6,20,30,34,37,14,25
угг657тЏъ,9,11,16,23,27,29,32,6,24
угг658тЏъ,10,12,16,18,19,22,37,11,20
угг659тЏъ,2,8,9,14,27,34,36,5,18
угг660тЏъ,4,6,12,13,16,17,31,14,20
угг661тЏъ,7,12,17,22,31,34,35,20,32
угг662тЏъ,4,14,15,21,22,24,37,5,20
угг663тЏъ,4,6,10,11,13,17,23,25,32
угг664тЏъ,3,6,8,14,21,22,31,17,37
угг665тЏъ,6,8,14,19,22,25,35,12,17`;
        
        document.getElementById('csvData').value = initialRawData;

        // --- сЃЄсЃ╝сѓ┐сѓхсѓцсѓесЃ│сѓ╣уће сѓ░сЃГсЃ╝сЃљсЃФтцЅТЋ░ ---
        let totalDraws = 0;
        let testTargetDraw = null;
        let testTargetBonus = [];

        // ух▒УеѕсЃбсЃЄсЃФтЁеСйЊсѓњС┐ЮТїЂсЂЎсѓІсѓфсЃќсѓИсѓДсѓ»сЃѕ
        let statsData = {
            lastDraw: [],        
            nFreq: Array(38).fill(0),
            coMatrix: [], 
            transitionMatrix: [], // NEW: тЅЇтЏъРєњС╗ітЏъсЂ«сЃъсЃФсѓ│сЃЋТјеуД╗сЃъсЃѕсЃфсЃЃсѓ»сѓ╣
            momentumMap: [], 
            decadeProb: {}, 
            intervals: Array(38).fill(0), // уЈЙтюесЂ«сЃЈсЃъсѓітЏъТЋ░
            maxIntervals: Array(38).fill(0), // NEW: тљёТЋ░тГЌсЂ«ТюђтцДсЃЈсЃъсѓітЏъТЋ░
            intervalHistory: Array.from({length: 38}, () => []), // NEW: сЃЈсЃъсѓісЂ«т▒ЦТГ┤№╝ѕтѕєтИЃУеѕу«Ќуће№╝Ѕ
            exp: {
                sum: { mean: 130, std: 25 },
                odd: { mean: 3.5, std: 1.2 },
                consec: { mean: 0.8, std: 0.8 },
                pull: { mean: 1.2, std: 1.0 },
                intSum: { mean: 40, std: 15 },
                intStd: { mean: 8, std: 4 },
                coScore: { mean: 20, std: 5 },
                transScore: { mean: 10, std: 3 }, // NEW: жЂиуД╗сѓ╣сѓ│сѓбсЂ«ТюЪтЙЁтђц
                indvIntZ: { mean: 0, std: 1 },    // NEW: тђІтѕЦсЃЈсЃъсѓіZсѓ╣сѓ│сѓбтљѕУеѕсЂ«ТюЪтЙЁтђц
                momentum: { mean: 0, std: 1 },
                adjPull: { mean: 1.5, std: 1.0 }, 
                decade: { mean: 0.05, std: 0.02 },
                block: { mean: 4.5, std: 0.8 } 
            },
            // AIТюђжЂЕтїќсЂЋсѓїсѓІжЄЇсЂ┐
            weights: { sum: 100, odd: 100, consec: 100, pull: 100, int: 100, intStd: 100, coScore: 100, trans: 100, indvInt: 100, momentum: 100, adj: 100, dec: 100, block: 100 },
            histMean: 8500,
            histStd: 500
        };

        const elements = {
            csvData: document.getElementById('csvData'),
            includeBonus: document.getElementById('includeBonus'),
            btnMockData: document.getElementById('btnMockData'),
            btnAnalyze: document.getElementById('btnAnalyze'),
            analysisSection: document.getElementById('analysisSection'),
            analysisTitle: document.getElementById('analysisTitle'),
            latestDraw: document.getElementById('latestDraw'),
            simulationSection: document.getElementById('simulationSection'),
            bestPairs: document.getElementById('bestPairs'),
            bestTransitions: document.getElementById('bestTransitions'), // NEW
            coldNumbers: document.getElementById('coldNumbers'),
            aiWeightsDisplay: document.getElementById('aiWeightsDisplay'),
            histScoreSection: document.getElementById('histScoreSection'),
            scoreDistribution: document.getElementById('scoreDistribution'),
            avgHistScore: document.getElementById('avgHistScore'),
            modeRadios: document.querySelectorAll('input[name="simMode"]'),
            countModeUI: document.getElementById('countModeUI'),
            allModeUI: document.getElementById('allModeUI'),
            simCount: document.getElementById('simCount'),
            ticketCount: document.getElementById('ticketCount'),
            btnSimulate: document.getElementById('btnSimulate'),
            resultSection: document.getElementById('resultSection'),
            predictionResults: document.getElementById('predictionResults')
        };

        // UIсѓцсЃЎсЃ│сЃѕ
        elements.modeRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                elements.countModeUI.classList.add('hidden');
                elements.allModeUI.classList.add('hidden');
                if (e.target.value === 'count') elements.countModeUI.classList.remove('hidden');
                else if (e.target.value === 'all') elements.allModeUI.classList.remove('hidden');
            });
        });

        // сЃдсЃ╝сЃєсѓБсЃфсЃєсѓБ
        function getBallColorClass(num) {
            if (num >= 1 && num <= 9) return 'ball-yellow';
            if (num >= 10 && num <= 19) return 'ball-blue';
            if (num >= 20 && num <= 29) return 'ball-red';
            if (num >= 30 && num <= 37) return 'ball-green';
            return 'bg-slate-500';
        }

        function countConsecutives(nums) {
            let count = 0;
            for(let i = 0; i < nums.length - 1; i++) if(nums[i+1] - nums[i] === 1) count++;
            return count;
        }

        function getDecadeKey(nums) {
            let d = [0,0,0,0];
            nums.forEach(n => d[Math.floor(n/10)]++);
            return d.join(':');
        }

        function countAdjacent(nums, refNums) {
            if (!refNums || refNums.length === 0) return 0;
            let count = 0;
            nums.forEach(n => { if (refNums.includes(n - 1) || refNums.includes(n + 1)) count++; });
            return count;
        }

        function getBlockCover(nums) {
            let blocks = new Set();
            nums.forEach(n => blocks.add(Math.ceil(n / 7.4))); // у┤ё5сЃќсЃГсЃЃсѓ»
            return blocks.size;
        }

        function generateRandom7() {
            let available = Array.from({length: 37}, (_, i) => i + 1);
            let picked = [];
            for(let i = 0; i < 7; i++) {
                let r = Math.floor(Math.random() * available.length);
                picked.push(available[r]);
                available.splice(r, 1);
            }
            return picked.sort((a, b) => a - b);
        }

        elements.btnMockData.addEventListener('click', () => {
            let csv = [];
            for (let i = 1; i <= 300; i++) {
                let mainDraw = generateRandom7();
                let available = Array.from({length: 37}, (_, i) => i + 1).filter(n => !mainDraw.includes(n));
                let bonusDraw = [available[Math.floor(Math.random()*available.length)], available[Math.floor(Math.random()*available.length)]];
                csv.push(`угг${i}тЏъ,${mainDraw.join(',')},${bonusDraw.join(',')}`);
            }
            elements.csvData.value = csv.join('\n');
            alert('300тЏътѕєсЂ«сЃђсЃЪсЃ╝сЃЄсЃ╝сѓ┐сѓњућЪТѕљсЂЌсЂЙсЂЌсЂЪсђѓ');
        });

        function parseLoto7Line(line) {
            let tokens = line.split(/[\s,]+/);
            let nums = tokens.filter(t => /^\d+$/.test(t)).map(n => parseInt(n, 10)).filter(n => n >= 1 && n <= 37);
            if (nums.length >= 7) {
                let mainNums = nums.slice(0, 7);
                let isSorted = true;
                for(let i=0; i<6; i++) { if(mainNums[i] >= mainNums[i+1]) isSorted = false; }
                if(isSorted) return nums; 
                return [...mainNums.sort((a, b) => a - b), ...nums.slice(7)];
            }
            return null;
        }

        // --- HuberТљЇтц▒сЃЕсѓцсѓ»сЂфсЃџсЃісЃФсЃєсѓБжќбТЋ░ ---
        // 1¤ЃсЂЙсЂДсЂ»Уе▒т«╣сђЂсЂЮсѓїС╗ЦСИісЂ»С║їТгАжќбТЋ░уџёсЂФтј│сЂЌсЂЈТИЏуѓ╣
        function getPenalty(z, weight) {
            if (z <= 1.0) return 0; 
            if (z <= 2.0) return (z - 1.0) * weight * 0.5; 
            return (1.0 * weight * 0.5) + Math.pow(z - 2.0, 2) * weight; 
        }

        // --- уЅ╣тЙ┤жЄЈТійтЄ║жќбТЋ░ ---
        function extractFeatures(draw, model) {
            let sum = 0, oddCount = 0, pullCount = 0, consecCount = 0;
            let intervals = [], momentumSum = 0, coScore = 0, transScore = 0, indvIntZSum = 0;

            for (let i = 0; i < 7; i++) {
                let n = draw[i];
                sum += n;
                if (n % 2 !== 0) oddCount++;
                if (model.lastDraw && model.lastDraw.includes(n)) pullCount++;
                if (i < 6 && draw[i+1] - n === 1) consecCount++;
                
                intervals.push(model.intervals ? model.intervals[n] : 0);
                momentumSum += model.momentumMap ? model.momentumMap[n] : 0;
                
                if (model.coMatrix) {
                    for (let j = i + 1; j < 7; j++) coScore += model.coMatrix[n][draw[j]];
                }

                // ућЪтГўТЎѓжќЊтѕєТъљ: уЈЙтюесЂ«сЃЈсЃъсѓісЂїсђЂсЂЮсЂ«ТЋ░тГЌсЂ«жЂјтј╗сЂ«сЃЈсЃъсѓітѕєтИЃсЂІсѓЅУдІсЂдсЂЕсѓїсЂЈсѓЅсЂёжђИУё▒сЂЌсЂдсЂёсѓІсЂІ
                let currentInt = model.intervals ? model.intervals[n] : 0;
                let hist = model.intervalHistory ? model.intervalHistory[n] : [];
                if (hist && hist.length > 0) {
                    let mean = hist.reduce((a,b)=>a+b,0) / hist.length;
                    let std = Math.sqrt(hist.reduce((a,b)=>a+Math.pow(b-mean,2),0) / hist.length) || 1;
                    indvIntZSum += Math.abs(currentInt - mean) / std;
                }
            }

            // сЃъсЃФсѓ│сЃЋжЂиуД╗: тЅЇтЏъсЂ«ТЋ░тГЌсЂІсѓЅС╗ітЏъсЂ«ТЋ░тГЌсЂИсЂ«ТјеуД╗сЂ«тљѕУеѕ
            if (model.lastDraw && model.transitionMatrix) {
                model.lastDraw.forEach(prevNum => {
                    draw.forEach(currNum => { transScore += model.transitionMatrix[prevNum][currNum]; });
                });
            }
            
            let intSum = intervals.reduce((a,b)=>a+b, 0);
            let intMean = intSum / 7;
            let intStd = Math.sqrt(intervals.reduce((a,b)=>a+Math.pow(b-intMean,2), 0)/7);
            let adjCount = countAdjacent(draw, model.lastDraw);
            let decKey = getDecadeKey(draw);
            let p_dec = model.decadeProb ? (model.decadeProb[decKey] || 0) : 0;
            let blockCover = getBlockCover(draw);

            // Zсѓ╣сѓ│сѓбтїќ
            let e = model.exp;
            let z = (val, mean, std, minStd=0.5) => Math.abs(val - mean) / Math.max(std, minStd);

            return { 
                sum: z(sum, e.sum.mean, e.sum.std, 1.0), 
                odd: z(oddCount, e.odd.mean, e.odd.std), 
                consec: z(consecCount, e.consec.mean, e.consec.std), 
                pull: z(pullCount, e.pull.mean, e.pull.std), 
                int: z(intSum, e.intSum.mean, e.intSum.std, 1.0), 
                intStd: z(intStd, e.intStd.mean, e.intStd.std), 
                coScore: z(coScore, e.coScore.mean, e.coScore.std, 1.0), 
                trans: z(transScore, e.transScore.mean, e.transScore.std, 1.0), // NEW
                indvInt: z(indvIntZSum, e.indvIntZ.mean, e.indvIntZ.std, 0.5),   // NEW
                momentum: z(momentumSum, e.momentum.mean, e.momentum.std), 
                adj: z(adjCount, e.adjPull.mean, e.adjPull.std), 
                dec: z(p_dec, e.decade.mean, e.decade.std, 0.01), 
                block: z(blockCover, (e.block || e.blockCover).mean, (e.block || e.blockCover).std),
                raw: { sum, oddCount, pullCount, consecCount, intSum, transScore }
            };
        }

        // тЪ║уцјсѓ╣сѓ│сѓбУеѕу«Ќ
        function calcRawScore(draw, model, weights) {
            let f = extractFeatures(draw, model);
            let score = 10000;
            for(let k of Object.keys(weights)) score -= getPenalty(f[k], weights[k]);
            return { score: score, ...f.raw };
        }

        // --- AIжЄЇсЂ┐С╗ўсЂЉ№╝ѕFisherтѕцтѕЦТ»ћ№╝Ѕ ---
        function trainWeights(validLines, tempModel) {
            let dummyData = [];
            for(let i=0; i<1500; i++) dummyData.push(generateRandom7());

            let targetLines = validLines.slice(-200).map(line => line.slice(0,7).sort((a,b)=>a-b));
            let keys = ['sum', 'odd', 'consec', 'pull', 'int', 'intStd', 'coScore', 'trans', 'indvInt', 'momentum', 'adj', 'dec', 'block'];
            
            let tFeats = {}; let dFeats = {};
            keys.forEach(k => { tFeats[k] = []; dFeats[k] = []; });

            targetLines.forEach(d => {
                let f = extractFeatures(d, tempModel);
                keys.forEach(k => tFeats[k].push(getPenalty(f[k], 1))); 
            });
            dummyData.forEach(d => {
                let f = extractFeatures(d, tempModel);
                keys.forEach(k => dFeats[k].push(getPenalty(f[k], 1)));
            });

            let scores = {}; let totalScore = 0;
            
            keys.forEach(k => {
                let tMean = tFeats[k].reduce((a,b)=>a+b,0) / tFeats[k].length;
                let dMean = dFeats[k].reduce((a,b)=>a+b,0) / dFeats[k].length;
                let tVar = tFeats[k].reduce((a,b)=>a+Math.pow(b-tMean,2),0) / tFeats[k].length;
                let dVar = dFeats[k].reduce((a,b)=>a+Math.pow(b-dMean,2),0) / dFeats[k].length;
                
                let diff = Math.max(0.001, dMean - tMean); 
                let denom = Math.sqrt(tVar + dVar) || 1;
                
                scores[k] = Math.log1p(diff / denom);
                totalScore += scores[k];
            });

            let bestWeights = {};
            keys.forEach(k => {
                let ratio = totalScore > 0 ? (scores[k] / totalScore) : (1/keys.length);
                bestWeights[k] = 30 + (ratio * 1500); // жЄЇсЂ┐сѓ╣сѓ▒сЃ╝сЃФ
            });
            return bestWeights;
        }

        // --- ух▒УеѕсЃбсЃЄсЃФТДІу»ЅжќбТЋ░ ---
        function calculateStatsModel(lines, includeBonus) {
            let nFreq = Array(38).fill(0);
            let freqShort = Array(38).fill(0), freqMid = Array(38).fill(0);
            let tDraws = 0;
            
            let coMatrix = Array.from({length: 38}, () => Array(38).fill(0));
            let transitionMatrix = Array.from({length: 38}, () => Array(38).fill(0)); // NEW
            let decadeCounts = {};
            
            let fLists = { sums:[], odds:[], consecs:[], pulls:[], intSums:[], intStds:[], coScores:[], transScores:[], indvIntZs:[], momentums:[], decProbs:[], adjPulls:[], blockCovers:[] };
            
            let tempIntervals = Array(38).fill(0); 
            let maxIntervals = Array(38).fill(0); // NEW
            let intervalHistory = Array.from({length: 38}, () => []); // NEW
            let pDraw = null;

            let wShort = Math.min(5, lines.length), wMid = Math.min(15, lines.length);
            lines.slice(-wShort).forEach(nums => nums.slice(0, 7).forEach(n => freqShort[n]++));
            lines.slice(-wMid).forEach(nums => nums.slice(0, 7).forEach(n => freqMid[n]++));
            
            // тЁеСйЊжа╗т║дсЃ╗тЁ▒УхисЃъсЃѕсЃфсѓ»сѓ╣сЂ«ТДІу»Ѕ
            lines.forEach(nums => {
                let mainNums = nums.slice(0, 7);
                // сЃюсЃ╝сЃісѓ╣сѓњтљФсѓЂсѓІта┤тљѕсЂ»тЁеСйЊжа╗т║дсЂ«сЂ┐УХ│сЂЎ
                let targetNums = includeBonus ? nums : mainNums;
                targetNums.forEach(n => { if(n<=37) nFreq[n]++; });
                
                for(let i=0; i<mainNums.length; i++) {
                    for(let j=i+1; j<mainNums.length; j++) {
                        coMatrix[mainNums[i]][mainNums[j]]++;
                        coMatrix[mainNums[j]][mainNums[i]]++;
                    }
                }
                decadeCounts[getDecadeKey(mainNums)] = (decadeCounts[getDecadeKey(mainNums)] || 0) + 1;
                tDraws++;
            });
            
            let decadeProb = {};
            for(let k in decadeCounts) decadeProb[k] = decadeCounts[k] / tDraws;

            // сЃбсЃАсЃ│сѓ┐сЃасЃъсЃЃсЃЌ
            let momentumMap = Array(38).fill(0);
            for(let i=1; i<=37; i++) {
                let pShort = freqShort[i] / wShort, pMid = freqMid[i] / wMid, pAll = nFreq[i] / tDraws;
                momentumMap[i] = (pShort - pMid) * 1.5 + (pMid - pAll);
            }

            // ТЎѓу│╗тѕЌсЂФТ▓┐сЂБсЂЪуЅ╣тЙ┤жЄЈсЂ«т▒ЦТГ┤ТійтЄ║
            lines.forEach(nums => {
                let mainNums = nums.slice(0, 7);
                
                fLists.sums.push(mainNums.reduce((a,b)=>a+b, 0));
                fLists.odds.push(mainNums.filter(n => n%2 !== 0).length);
                fLists.consecs.push(countConsecutives(mainNums));
                fLists.blockCovers.push(getBlockCover(mainNums));
                fLists.decProbs.push(decadeProb[getDecadeKey(mainNums)] || 0);
                
                if (pDraw !== null) {
                    fLists.pulls.push(mainNums.filter(n => pDraw.includes(n)).length);
                    fLists.adjPulls.push(countAdjacent(mainNums, pDraw));
                    // жЂиуД╗сЃъсЃѕсЃфсѓ»сѓ╣сЂ«ТДІу»Ѕ
                    pDraw.forEach(pn => mainNums.forEach(cn => transitionMatrix[pn][cn]++));
                    
                    // жЂиуД╗сѓ╣сѓ│сѓбсЂ«Уеѕу«Ќ
                    let tScore = 0;
                    pDraw.forEach(pn => mainNums.forEach(cn => tScore += transitionMatrix[pn][cn]));
                    fLists.transScores.push(tScore);
                }
                
                let invs = mainNums.map(n => tempIntervals[n]);
                let iSum = invs.reduce((a,b)=>a+b,0);
                fLists.intSums.push(iSum);
                let iMean = iSum/7;
                fLists.intStds.push(Math.sqrt(invs.reduce((a,b)=>a+Math.pow(b-iMean,2),0)/7));
                
                // ућЪтГўТЎѓжќЊтѕєТъљсЂ«тђІтѕЦZсѓ╣сѓ│сѓб
                let iZSum = 0;
                mainNums.forEach(n => {
                    let hist = intervalHistory[n];
                    if (hist.length > 0) {
                        let m = hist.reduce((a,b)=>a+b,0)/hist.length;
                        let s = Math.sqrt(hist.reduce((a,b)=>a+Math.pow(b-m,2),0)/hist.length) || 1;
                        iZSum += Math.abs(tempIntervals[n] - m) / s;
                    }
                });
                fLists.indvIntZs.push(iZSum);

                let cScore = 0;
                for(let i=0; i<mainNums.length; i++) {
                    for(let j=i+1; j<mainNums.length; j++) cScore += coMatrix[mainNums[i]][mainNums[j]];
                }
                fLists.coScores.push(cScore);
                fLists.momentums.push(mainNums.reduce((acc, n) => acc + momentumMap[n], 0));
                
                // сѓцсЃ│сѓ┐сЃ╝сЃљсЃФсЂеТюђтцДсѓцсЃ│сѓ┐сЃ╝сЃљсЃФсЂ«ТЏ┤Тќ░
                for(let i=1; i<=37; i++) {
                    if (mainNums.includes(i)) {
                        intervalHistory[i].push(tempIntervals[i]);
                        if (tempIntervals[i] > maxIntervals[i]) maxIntervals[i] = tempIntervals[i];
                        tempIntervals[i] = 0;
                    } else {
                        tempIntervals[i]++;
                    }
                }
                pDraw = mainNums;
            });

            const calcMean = arr => arr.length ? arr.reduce((a,b)=>a+b,0)/arr.length : 0;
            const calcStd = (arr, mean) => arr.length ? Math.sqrt(arr.reduce((a,b)=>a+Math.pow(b-mean,2),0)/arr.length) || 0 : 0;

            let exp = {};
            for(let key in fLists) {
                let mean = calcMean(fLists[key]);
                exp[key.replace(/s$/, '')] = { mean: mean, std: calcStd(fLists[key], mean) };
            }
            // сѓГсЃ╝тљЇсЂ«Уф┐ТЋ┤
            exp.intSum = exp.intSum || exp.int; exp.intStd = exp.intStd || exp.int; exp.adjPull = exp.adjPull || exp.adj;
            exp.decade = exp.decProb || exp.dec; exp.transScore = exp.transScore || exp.tran; exp.indvIntZ = exp.indvIntZ || exp.indvInt;
            exp.block = exp.blockCover || exp.block;

            return { nFreq, tDraws, lastDraw: pDraw, coMatrix, transitionMatrix, momentumMap, decadeProb, intervals: tempIntervals, maxIntervals, intervalHistory, exp };
        }

        // --- сЃАсѓцсЃ│тЄдуљєжќІтДІ ---
        elements.btnAnalyze.addEventListener('click', () => {
            const rawData = elements.csvData.value.trim();
            const includeBonus = elements.includeBonus.checked;
            
            if (!rawData) { alert('сЃЄсЃ╝сѓ┐сЂїтЁЦтіЏсЂЋсѓїсЂдсЂёсЂЙсЂЏсѓЊсђѓ'); return; }

            elements.btnAnalyze.disabled = true;
            elements.btnAnalyze.innerHTML = `<div class="loader border-white border-top-transparent w-4 h-4 border-2"></div> <span>AIУДБТъљСИГ...</span>`;

            setTimeout(() => {
                let validLines = [];
                rawData.split('\n').forEach(line => {
                    let nums = parseLoto7Line(line);
                    if (nums && nums.length >= 7) validLines.push(nums);
                });

                if (validLines.length < 5) { alert('сЃЄсЃ╝сѓ┐сЂїУХ│сѓісЂЙсЂЏсѓЊсђѓ'); elements.btnAnalyze.disabled = false; return; }

                const mode = document.querySelector('input[name="analyzeMode"]:checked').value;
                testTargetDraw = null; testTargetBonus = [];
                if (mode === 'backtest') {
                    let testData = validLines.pop(); 
                    testTargetDraw = testData.slice(0, 7).sort((a,b)=>a-b);
                    if (testData.length > 7) testTargetBonus = testData.slice(7);
                }

                let finalModel = calculateStatsModel(validLines, includeBonus);
                let optWeights = trainWeights(validLines, finalModel);
                finalModel.weights = optWeights;

                // сЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│сЂ«тѕєтИЃсѓ╣сѓ│сѓбсЃфсЃ│сѓ░
                let histScores = []; let tScore = 0;
                if (validLines.length > 20) {
                    for (let i = 20; i < validLines.length; i++) {
                        let tempModel = calculateStatsModel(validLines.slice(0, i), includeBonus);
                        let eval = calcRawScore(validLines[i].slice(0,7).sort((a,b)=>a-b), tempModel, optWeights);
                        histScores.push({ index: i, score: eval.score });
                        tScore += eval.score;
                    }
                }
                
                finalModel.histMean = histScores.length ? tScore / histScores.length : 8500;
                finalModel.histStd = histScores.length ? Math.max(Math.sqrt(histScores.reduce((a,b)=>a+Math.pow(b.score-finalModel.histMean,2),0)/histScores.length), 100) : 500;
                
                statsData = finalModel;

                displayAnalysis();
                displayHistScores(histScores);

                elements.analysisSection.classList.remove('hidden');
                elements.simulationSection.classList.remove('hidden');
                elements.resultSection.classList.add('hidden');

                elements.btnAnalyze.disabled = false;
                elements.btnAnalyze.innerHTML = `<span>­ЪЊі сЃЄсЃ╝сѓ┐УДБТъљсЂеAIТюђжЂЕтїќсѓњт«ЪУАї</span>`;
            }, 50); 
        });

        // --- UIУАеуц║жќбТЋ░ ---
        function displayAnalysis() {
            elements.analysisTitle.innerHTML = `STEP 2: сЃЄсЃ╝сѓ┐УДБТъљухљТъю №╝є AIтГду┐њсЃбсЃЄсЃФ` + (testTargetDraw ? ` <span class="text-sm text-white bg-indigo-500 px-2 py-1 rounded ml-2">­ЪћЇ жЂјтј╗ТцюУе╝сЃбсЃ╝сЃЅ</span>` : ``);
            
            elements.latestDraw.innerHTML = '';
            statsData.lastDraw.forEach(n => elements.latestDraw.innerHTML += `<div class="ball-mini rounded-full flex items-center justify-center text-white shadow ${getBallColorClass(n)}">${n}</div>`);

            // уЏИТђДсЃџсѓб
            let pairs = [];
            for(let i=1; i<=37; i++) for(let j=i+1; j<=37; j++) if(statsData.coMatrix[i] && statsData.coMatrix[i][j]>0) pairs.push({p1:i, p2:j, c:statsData.coMatrix[i][j]});
            elements.bestPairs.innerHTML = pairs.sort((a,b)=>b.c-a.c).slice(0,5).map(p => `
                <li class="flex justify-between items-center bg-white p-2 rounded border border-purple-100">
                    <span class="flex gap-1"><span class="bg-purple-100 text-purple-800 px-1 rounded">${p.p1}</span> & <span class="bg-purple-100 text-purple-800 px-1 rounded">${p.p2}</span></span>
                    <span class="font-bold text-purple-700">${p.c}тЏъ</span>
                </li>
            `).join('');

            // сЃъсЃФсѓ│сЃЋжЂиуД╗
            let trans = [];
            if (statsData.lastDraw && statsData.transitionMatrix) {
                statsData.lastDraw.forEach(pn => {
                    for(let i=1; i<=37; i++) if(statsData.transitionMatrix[pn][i]>0) trans.push({pn:pn, cn:i, c:statsData.transitionMatrix[pn][i]});
                });
            }
            // pnсЂеcnсЂ«ухёсЂ┐тљѕсѓЈсЂЏсЂДжЏєУеѕсЂЌуЏ┤сЂЎсЂ«сЂДсЂ»сЂфсЂЈсђЂтЇўсЂФсђїтЅЇтЏътЄ║сЂЪСйЋсЂІсЂ«ТгАсЂФтЄ║сЂЪтЏъТЋ░сђЇсЂДcnсѓњУЕЋСЙАсЂЎсѓІ
            let nextNumScores = Array(38).fill(0);
            trans.forEach(t => nextNumScores[t.cn] += t.c);
            let topNext = [];
            for(let i=1; i<=37; i++) if(nextNumScores[i]>0) topNext.push({num:i, score:nextNumScores[i]});
            
            elements.bestTransitions.innerHTML = topNext.sort((a,b)=>b.score-a.score).slice(0,5).map(n => `
                <li class="flex justify-between items-center bg-white p-2 rounded border border-amber-100">
                    <span class="font-bold flex items-center gap-2">Ръћ <div class="ball-mini rounded-full flex items-center justify-center text-white ${getBallColorClass(n.num)}">${n.num}</div></span>
                    <span class="text-amber-700 text-xs">жЂиуД╗Т│бтЈі: ${n.score}Pt</span>
                </li>
            `).join('');

            // сѓ╣сЃЕсЃ│сЃЌсЃ╗ућЪтГўТЎѓжќЊ
            let intervals = [];
            for (let i = 1; i <= 37; i++) intervals.push({ num: i, int: statsData.intervals[i], max: statsData.maxIntervals[i] });
            elements.coldNumbers.innerHTML = intervals.sort((a,b)=>b.int-a.int).slice(0,5).map(i => {
                let ratio = Math.min(100, (i.int / i.max) * 100);
                let isDanger = ratio >= 90;
                return `
                <li class="bg-white p-2 rounded border border-blue-100">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-slate-700">${i.num}</span>
                        <span class="text-xs ${isDanger?'text-red-500 font-bold':'text-blue-600'}">${i.int}тЏъ сЃЈсЃъсѓі</span>
                    </div>
                    <div class="w-full bg-slate-100 rounded-full h-1.5 flex overflow-hidden">
                        <div class="${isDanger?'bg-red-500':'bg-blue-400'}" style="width: ${ratio}%"></div>
                    </div>
                    <div class="text-[9px] text-right text-slate-400 mt-0.5">жЂјтј╗ТюђтцД: ${i.max}тЏъ</div>
                </li>
            `}).join('');

            // AIжЄЇсЂ┐УАеуц║
            let map = [
                { k: 'trans', n: 'сЃъсЃФсѓ│сЃЋжЂиуД╗(ТхЂсѓї)жЄЇУдЂт║д' }, { k: 'indvInt', n: 'тђІтѕЦтЉеТюЪ(ућЪтГўжЎљуЋї)жЄЇУдЂт║д' }, { k: 'coScore', n: 'уЏИжќбсЃЇсЃЃсЃѕсЃ»сЃ╝сѓ»жЄЇУдЂт║д' },
                { k: 'intStd', n: 'ТиисЂќсѓітЁитљѕ(тѕєТЋБ)жЄЇУдЂт║д' }, { k: 'momentum', n: 'сЃѕсЃгсЃ│сЃЅтІбсЂёжЄЇУдЂт║д' }, { k: 'adj', n: 'жџБТјЦТ│бтЈіжЄЇУдЂт║д' },
                { k: 'dec', n: 'уЋфтЈ░сѓ░сЃФсЃ╝сЃЌтЂЈсѓісЃџсЃісЃФсЃєсѓБ' }, { k: 'block', n: 'тї║ућ╗тѕєТЋБсЃџсЃісЃФсЃєсѓБ' }, { k: 'consec', n: 'жђБуЋфТЋ░уЋ░тИИсЃџсЃісЃФсЃєсѓБ' },
                { k: 'sum', n: 'тљѕУеѕтђцуЋ░тИИсЃџсЃісЃФсЃєсѓБ' }, { k: 'odd', n: 'тЦЄТЋ░тЂХТЋ░Т»ћсЃџсЃісЃФсЃєсѓБ' }, { k: 'pull', n: 'т╝ЋсЂБт╝хсѓіуЋ░тИИсЃџсЃісЃФсЃєсѓБ' }, { k: 'int', n: 'уиЈсЃЈсЃъсѓіуЋ░тИИсЃџсЃісЃФсЃєсѓБ' }
            ].sort((a,b) => statsData.weights[b.k] - statsData.weights[a.k]);

            let totalW = Object.values(statsData.weights).reduce((a,b)=>a+b,0);
            elements.aiWeightsDisplay.innerHTML = map.map((m, i) => {
                let p = ((statsData.weights[m.k]/totalW)*100).toFixed(1);
                let isTop = i < 3;
                return `
                    <div class="mb-2">
                        <div class="flex justify-between text-[10px] mb-1 ${isTop?'text-indigo-300 font-bold':'text-slate-500'}">
                            <span>${m.n} ${i===0?'­ЪЉЉ':''}</span><span>${p}%</span>
                        </div>
                        <div class="w-full bg-slate-700 rounded-full h-1"><div class="${isTop?'bg-indigo-400':'bg-slate-600'} h-1 rounded-full" style="width:${p}%"></div></div>
                    </div>
                `}).join('');
        }

        function displayHistScores(scores) {
            if(!scores.length) { elements.histScoreSection.classList.add('hidden'); return; }
            elements.histScoreSection.classList.remove('hidden');
            elements.avgHistScore.textContent = Math.round(statsData.histMean);
            
            let dist = [{l:'9500уѓ╣~',min:9500,c:0,col:'bg-red-400'},{l:'9000~9499',min:9000,c:0,col:'bg-amber-400'},{l:'8500~8999',min:8500,c:0,col:'bg-green-400'},{l:'~8499',min:-9999,c:0,col:'bg-blue-400'}];
            scores.forEach(s => { for(let i=0; i<dist.length; i++) if(s.score >= dist[i].min) { dist[i].c++; break; } });
            
            let maxC = Math.max(...dist.map(d=>d.c));
            elements.scoreDistribution.innerHTML = dist.map(d => `
                <div class="flex items-center text-xs gap-2">
                    <div class="w-16 text-slate-600 font-bold text-right">${d.l}</div>
                    <div class="flex-1 bg-slate-100 h-4 rounded overflow-hidden"><div class="${d.col} h-full" style="width:${(d.c/maxC)*100}%"></div></div>
                    <div class="w-8 text-slate-500 text-right">${d.c}</div>
                </div>
            `).join('');
        }

        // --- сѓисЃЪсЃЦсЃгсЃ╝сѓисЃДсЃ│УЕЋСЙАжќбТЋ░№╝ѕсЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│сЂИсЂ«сѓГсЃБсЃфсЃќсЃгсЃ╝сѓисЃДсЃ│№╝Ѕ ---
        function evaluateDraw(draw) {
            let base = calcRawScore(draw, statsData, statsData.weights);
            let diff = Math.abs(base.score - statsData.histMean);
            let zDiff = diff / Math.max(statsData.histStd, 50);
            let finalScore = 10000 - (zDiff * 250); 
            return { score: finalScore, rawScore: base.score, sum: base.sum, oddCount: base.oddCount, pullCount: base.pullCount, consecCount: base.consecCount, transScore: base.transScore };
        }

        elements.btnSimulate.addEventListener('click', () => {
            const mode = document.querySelector('input[name="simMode"]:checked').value;
            const tCount = parseInt(elements.ticketCount.value);
            
            elements.btnSimulate.disabled = true;
            elements.btnSimulate.innerHTML = `<div class="loader border-white border-top-transparent"></div> <span class="relative z-10">AIТ╝ћу«ЌСИГ...</span>`;
            elements.resultSection.classList.add('hidden');

            setTimeout(() => {
                if (mode === 'count') runCountMode(parseInt(elements.simCount.value), tCount);
                else runAllMode(tCount);
            }, 50);
        });

        function runCountMode(iters, tCount) {
            let res = [];
            for (let i = 0; i < iters; i++) {
                let d = generateRandom7();
                res.push({ d: d, e: evaluateDraw(d) });
            }
            processResults(res.sort((a,b)=>b.e.score - a.e.score), tCount, iters, "сЃбсЃ│сЃєсѓФсЃФсЃГТ│Ћ");
        }

        function runAllMode(tCount) {
            const TOTAL = 10295472;
            let processed = 0, topRes = [], minScore = -Infinity, combo = [1,2,3,4,5,6,7], isDone = false;

            function chunk() {
                let cCount = 0;
                while (cCount < 30000 && !isDone) {
                    let d = [...combo], e = evaluateDraw(d);
                    if (e.score > minScore) {
                        topRes.push({d:d, e:e}); topRes.sort((a,b)=>b.e.score - a.e.score);
                        if (topRes.length > tCount*5) topRes.pop();
                        if (topRes.length === tCount*5) minScore = topRes[topRes.length-1].e.score;
                    }
                    let i = 6;
                    while (i >= 0 && combo[i] === 37 - 6 + i) i--;
                    if (i < 0) isDone = true;
                    else { combo[i]++; for (let j=i+1; j<7; j++) combo[j] = combo[j-1]+1; }
                    cCount++; processed++;
                }

                if (isDone) processResults(topRes, tCount, TOTAL, "т«їтЁеуиЈтйЊсЂЪсѓіУДБТъљ");
                else {
                    elements.btnSimulate.innerHTML = `<div class="loader border-white border-top-transparent"></div> <div class="flex flex-col items-center"><span class="text-sm font-bold relative z-10">тЁесЃЉсѓ┐сЃ╝сЃ│УДБТъљСИГ... ${((processed/TOTAL)*100).toFixed(1)}%</span></div>`;
                    setTimeout(chunk, 0);
                }
            }
            chunk();
        }

        function processResults(results, tCount, iters, modeName) {
            let unique = [], seen = new Set();
            for (let r of results) {
                let k = r.d.join(',');
                if (!seen.has(k)) { seen.add(k); unique.push(r); if(unique.length >= tCount*2) break; }
            }
            
            let preds = [unique[0]]; // 1СйЇсЂ»уб║т«џ
            let cands = unique.slice(1);
            for (let i=cands.length-1; i>0; i--) { let j=Math.floor(Math.random()*(i+1)); [cands[i],cands[j]] = [cands[j],cands[i]]; }
            for (let i=0; i<tCount-1 && i<cands.length; i++) preds.push(cands[i]);

            renderResults(preds, iters, modeName);
            
            elements.btnSimulate.disabled = false;
            elements.btnSimulate.innerHTML = `<span class="relative z-10">­Ъј░ ТюђТќ░сѓбсЃФсѓ┤сЃфсѓ║сЃасЂДС║ѕТЃ│сѓњућЪТѕљсЂЎсѓІ</span>`;
            elements.resultSection.classList.remove('hidden');
            elements.resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        function renderResults(preds, iters, modeName) {
            let html = `
                <div class="text-center text-sm text-slate-700 mb-6 bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                    <b class="text-indigo-600 text-lg block mb-2">${modeName} т«їС║є</b>
                    Уеѕу«ЌуЕ║жќЊ <b>${iters.toLocaleString()} жђџсѓі</b> сѓњУЕЋСЙАсЂЌсђЂ<br>
                    сђїсЃъсЃФсѓ│сЃЋжЂиуД╗уб║ујЄсђЇсЂесђїжЂЕт║дсЂфсЃюсЃфсЃЦсЃ╝сЃасѓЙсЃ╝сЃ│тѕєтИЃсђЇсЂФТюђсѓѓтљѕУЄ┤сЂЌсЂЪ <b>${preds.length} сЃЉсѓ┐сЃ╝сЃ│</b>сѓњТійтЄ║сЂЌсЂЙсЂЌсЂЪсђѓ
                </div>
            `;

            if (testTargetDraw) {
                let te = evaluateDraw(testTargetDraw);
                html += `
                    <div class="mb-6 p-4 bg-slate-800 text-white rounded-xl shadow-lg border border-slate-700">
                        <b class="text-indigo-300 block mb-2 text-sm">­Ъј» сЃљсЃЃсѓ»сЃєсѓ╣сЃѕ№╝ѕжЂјтј╗ТцюУе╝№╝ЅуГћсЂѕтљѕсѓЈсЂЏ</b>
                        <p class="text-xs text-slate-400 mb-3">жџасЂЌсЂдсЂісЂёсЂЪсђїТюђТќ░тЏъсЂ«ТГБУДБсђЇсЂДсЂЎсђѓС╗ЦСИІсЂ«С║ѕТЃ│сЂеТ»ћУ╝ЃсЂЌсЂдсЂЈсЂасЂЋсЂёсђѓ</p>
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs font-bold text-slate-400 w-12">ТюгТЋ░тГЌ:</span>
                            ${testTargetDraw.map(n => `<div class="ball-mini rounded-full flex items-center justify-center font-bold ${getBallColorClass(n)}">${n}</div>`).join('')}
                        </div>
                        <div class="text-xs text-slate-300 bg-slate-900 inline-block px-3 py-1.5 rounded border border-slate-700">
                            сЂЊсЂ«ТГБУДБсЂ«ТюђжЂЕтїќсѓ╣сѓ│сѓб: <span class="text-indigo-400 font-bold text-base">${Math.round(te.score)}</span> уѓ╣
                        </div>
                    </div>
                `;
            }

            preds.forEach((p, i) => {
                let mCount = 0, bMatch = 0;
                if (testTargetDraw) {
                    p.d.forEach(n => { if (testTargetDraw.includes(n)) mCount++; else if (testTargetBonus.includes(n)) bMatch++; });
                }

                html += `
                    <div class="bg-white p-5 rounded-xl shadow-md border ${i===0?'border-indigo-400 ring-2 ring-indigo-100':'border-slate-200'} relative overflow-hidden">
                        ${i===0?'<div class="absolute top-0 left-0 bg-indigo-500 text-white text-[10px] font-bold px-3 py-1 rounded-br-lg shadow">AI ТюгтЉйТјетЦе</div>':''}
                        
                        <div class="flex justify-between items-center border-b border-slate-100 pb-3 mb-4 mt-2">
                            <span class="font-black text-slate-700 text-lg tracking-widest">С║ѕТЃ│ ${i + 1}</span>
                            <div class="text-right">
                                <div class="text-[10px] text-slate-400">уиЈтљѕт░цт║дсѓ╣сѓ│сѓб</div>
                                <div class="text-xl font-black ${p.e.score>=9000?'text-red-500':'text-indigo-600'}">${Math.round(p.e.score)}</div>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap gap-2 md:gap-3 justify-center mb-5">
                            ${p.d.map(n => `<div class="loto-ball ${getBallColorClass(n)}">${n}</div>`).join('')}
                        </div>
                        
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-slate-600 bg-slate-50 p-3 rounded-lg border border-slate-100">
                            <div class="flex flex-col"><span class="text-slate-400">сЃъсЃФсѓ│сЃЋТјеуД╗Т│бтЈі</span><b class="text-amber-600">${p.e.transScore} Pt</b></div>
                            <div class="flex flex-col"><span class="text-slate-400">тЅЇтЏъсЂІсѓЅсЂ«т╝ЋсЂБт╝хсѓі</span><b class="${p.e.pullCount>0?'text-blue-600':''}">${p.e.pullCount} тђІ</b></div>
                            <div class="flex flex-col"><span class="text-slate-400">тЦЄтЂХТ»ћ (тЦЄ:тЂХ)</span><b>${p.e.oddCount}:${7-p.e.oddCount}</b></div>
                            <div class="flex flex-col"><span class="text-slate-400">тљѕУеѕтђц</span><b>${p.e.sum}</b></div>
                        </div>
                `;

                if (testTargetDraw) {
                    let pText = "сЃЈсѓ║сЃг", bgClass = "bg-slate-50 text-slate-500 border-slate-200";
                    if(mCount===7){pText="­ЪЉЉ 1уГЅуЏИтйЊ№╝Ђ";bgClass="bg-red-100 text-red-700 border-red-300 font-bold";}
                    else if(mCount===6&&bMatch>=1){pText="Рюе 2уГЅуЏИтйЊ№╝Ђ";bgClass="bg-orange-100 text-orange-700 border-orange-300 font-bold";}
                    else if(mCount===6){pText="­ЪјЅ 3уГЅуЏИтйЊ№╝Ђ";bgClass="bg-orange-50 text-orange-700 border-orange-200 font-bold";}
                    else if(mCount===5){pText="­ЪЉЇ 4уГЅуЏИтйЊ";bgClass="bg-blue-50 text-blue-700 border-blue-200 font-bold";}
                    else if(mCount===4){pText="­ЪЉЈ 5уГЅуЏИтйЊ";bgClass="bg-green-50 text-green-700 border-green-200 font-bold";}
                    else if(mCount===3&&bMatch>=1){pText="Рў║№ИЈ 6уГЅуЏИтйЊ";bgClass="bg-indigo-50 text-indigo-700 border-indigo-200 font-bold";}
                    
                    html += `<div class="mt-4 p-3 text-center text-sm border rounded-lg ${bgClass}">ухљТъю: ТюгТЋ░тГЌ <b>${mCount}</b> тђІСИђУЄ┤${bMatch>0?` (B <b>${bMatch}</b> тђІ)`:''} Ръћ <span class="text-base ml-2">${pText}</span></div>`;
                }
                html += `</div>`;
            });
            elements.predictionResults.innerHTML = html;
        }
    </script>
</body>
</html>
